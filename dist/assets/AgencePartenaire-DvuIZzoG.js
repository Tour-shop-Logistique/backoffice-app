import{c as e,j as s,L as t,b as a}from"./index-BzHVKazg.js";import{r as l}from"./router-BcYogCAZ.js";import{C as r}from"./circle-check-DcHPPs-h.js";import{C as i}from"./circle-x-21-KegWw.js";import{S as n}from"./search-CasI9TsS.js";import{M as c}from"./map-pin-4DoO1x-I.js";import{P as d}from"./phone-BFO7Qp3q.js";import{X as o}from"./x-sDzYkWd9.js";import{C as x}from"./clock-B9uxZlzU.js";import"./vendor-DOHx2j1n.js";
/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=e("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),m=()=>{const[e,m]=l.useState([]),[h,g]=l.useState([]),[u,f]=l.useState(!0),[b,j]=l.useState(null),[v,N]=l.useState(null),[w,y]=l.useState(""),[k,z]=l.useState("all");return l.useEffect(()=>{const e=sessionStorage.getItem("agences");if(e)return m(JSON.parse(e)),g(JSON.parse(e)),void f(!1);(async()=>{try{const e=await a.get("/agence/list");if(!e.data?.success)throw new Error("Impossible de charger les agences");m(e.data.agences),g(e.data.agences),sessionStorage.setItem("agences",JSON.stringify(e.data.agences))}catch(e){j(e.message)}finally{f(!1)}})()},[]),l.useEffect(()=>{let s=e;w&&(s=s.filter(e=>e.nom_agence.toLowerCase().includes(w.toLowerCase())||e.ville.toLowerCase().includes(w.toLowerCase())||e.adresse.toLowerCase().includes(w.toLowerCase()))),"all"!==k&&(s=s.filter(e=>"active"===k?e.actif:!e.actif)),g(s)},[w,k,e]),s.jsxs("div",{className:"animate-fade-in space-y-6 pb-20 md:pb-8",children:[s.jsx("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:s.jsxs("div",{className:"max-w-2xl",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:"Agences Partenaires"}),s.jsx("p",{className:"text-slate-500 text-sm mt-1 leading-relaxed italic",children:"Consultez le réseau d'agences physiques et gérez les points de présence opérationnels du service."})]})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[{label:"Total Agences",value:e.length,icon:p,color:"slate"},{label:"Opérationnelles",value:e.filter(e=>e.actif).length,icon:r,color:"green"},{label:"En pause",value:e.filter(e=>!e.actif).length,icon:i,color:"red"}].map((e,t)=>s.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center "+("green"===e.color?"bg-green-50 text-green-600":"red"===e.color?"bg-red-50 text-red-600":"bg-slate-50 text-slate-600"),children:s.jsx(e.icon,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-none mb-1",children:e.label}),s.jsx("p",{className:"text-xl font-bold text-slate-900",children:e.value})]})]},t))}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-center bg-white p-3 rounded-xl border border-slate-200 shadow-sm",children:[s.jsxs("div",{className:"relative flex-1 w-full",children:[s.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),s.jsx("input",{type:"text",placeholder:"Filtrer par nom, ville ou adresse...",value:w,onChange:e=>y(e.target.value),className:"w-full pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-1 focus:ring-slate-900 focus:border-slate-900 outline-none transition-all placeholder:text-slate-400"})]}),s.jsx("div",{className:"flex items-center gap-2 w-full md:w-auto",children:s.jsxs("select",{value:k,onChange:e=>z(e.target.value),className:"flex-1 md:flex-none py-2 px-3 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-1 focus:ring-slate-900 outline-none transition-all font-medium text-slate-700",children:[s.jsx("option",{value:"all",children:"Tous les états"}),s.jsx("option",{value:"active",children:"Actives uniquement"}),s.jsx("option",{value:"inactive",children:"Suspendues"})]})})]}),u?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 grayscale opacity-50",children:[s.jsx(t,{className:"h-10 w-10 text-slate-900 animate-spin mb-4"}),s.jsx("p",{className:"text-slate-500 font-medium text-xs uppercase tracking-widest",children:"Récupération des données réseau..."})]}):b?s.jsxs("div",{className:"p-4 bg-red-50 border border-red-100 rounded-lg flex items-center gap-3 text-red-700 font-bold text-xs uppercase tracking-wide",children:[s.jsx(i,{size:16}),b]}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5",children:[h.map(e=>s.jsxs("div",{className:"group bg-white rounded-xl border border-slate-200 shadow-sm hover:border-slate-900/20 hover:shadow-lg hover:shadow-slate-900/5 transition-all duration-300 overflow-hidden cursor-pointer relative",onClick:()=>N(e),children:[s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("div",{className:"w-2 h-2 rounded-full "+(e.actif?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.4)]":"bg-slate-300")}),s.jsx("span",{className:"text-[9px] font-bold uppercase tracking-tight px-2 py-0.5 rounded-full border "+(e.actif?"bg-green-50 border-green-100 text-green-600":"bg-slate-50 border-slate-200 text-slate-400"),children:e.actif?"Opérationnelle":"En pause"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-600 transition-colors",children:e.nom_agence}),s.jsxs("p",{className:"text-[11px] text-slate-400 font-medium uppercase tracking-tight mt-0.5",children:[e.commune,", ",e.ville]})]}),s.jsxs("div",{className:"space-y-2 pt-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 font-medium",children:[s.jsx(c,{size:14,className:"text-slate-400"}),s.jsx("span",{className:"truncate",children:e.adresse})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 font-medium",children:[s.jsx(d,{size:14,className:"text-slate-400"}),s.jsx("span",{children:e.telephone})]})]})]}),s.jsxs("div",{className:"opacity-0 group-hover:opacity-100 absolute bottom-3 right-5 transition-opacity flex items-center gap-1.5 text-[10px] font-bold text-slate-900 uppercase tracking-widest",children:["Plus de détails ",s.jsx("span",{className:"text-lg leading-none mt-[-2px]",children:"→"})]})]},e.id)),0===h.length&&s.jsxs("div",{className:"col-span-full py-16 text-center bg-white rounded-xl border border-dashed border-slate-200",children:[s.jsx(p,{className:"h-10 w-10 text-slate-200 mx-auto mb-4"}),s.jsx("h3",{className:"text-xs font-bold text-slate-800 uppercase tracking-widest",children:"Aucune agence trouvée"}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Élargissez vos critères de recherche pour voir plus de points."})]})]}),v&&s.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-[2px] flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col border border-slate-200 animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-white sticky top-0 z-10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-slate-100 rounded text-slate-600",children:s.jsx(p,{size:18})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-bold text-slate-900 uppercase tracking-widest",children:"Fiche Établissement"}),s.jsxs("p",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-tighter",children:["ID Réseau: ",v.id.substring(0,8)]})]})]}),s.jsx("button",{onClick:()=>N(null),className:"p-2 hover:bg-slate-50 rounded-lg text-slate-400 hover:text-slate-900 transition-colors",children:s.jsx(o,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"overflow-y-auto custom-scrollbar p-6 space-y-8",children:[s.jsxs("section",{className:"flex flex-col md:flex-row justify-between items-start gap-6",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("h3",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:v.nom_agence}),s.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:v.description||"Aucune description fournie pour cette agence partenaire."})]}),s.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-slate-50 border border-slate-100 rounded-lg shrink-0",children:[s.jsx("div",{className:"w-2 h-2 rounded-full "+(v.actif?"bg-green-500":"bg-slate-300")}),s.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest",children:v.actif?"Active":"Inactive"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-5 bg-slate-50 rounded-xl border border-slate-100",children:[s.jsxs("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-1.5",children:[s.jsx(c,{size:10})," Localisation"]}),s.jsx("p",{className:"text-sm font-bold text-slate-900",children:v.adresse}),s.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[v.commune,", ",v.ville]}),s.jsx("p",{className:"text-[10px] text-slate-400 uppercase font-black mt-2 tracking-tighter",children:v.pays})]}),s.jsxs("div",{className:"p-5 bg-slate-50 rounded-xl border border-slate-100",children:[s.jsxs("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-1.5",children:[s.jsx(d,{size:10})," Contact Direct"]}),s.jsx("p",{className:"text-sm font-bold text-slate-900",children:v.telephone}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Ligne disponible aux heures d'ouverture indiquées."})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest whitespace-nowrap flex items-center gap-2",children:[s.jsx(x,{size:12})," Horaires de Service"]}),s.jsx("div",{className:"h-px bg-slate-100 w-full"})]}),s.jsx("div",{className:"bg-white border border-slate-100 rounded-lg divide-y divide-slate-50 overflow-hidden",children:v.horaires.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between p-3 px-4 hover:bg-slate-50/50 transition-colors",children:[s.jsx("span",{className:"text-[11px] font-bold text-slate-700 capitalize w-24",children:e.jour}),e.ferme?s.jsx("span",{className:"text-[10px] font-bold text-red-500 bg-red-50 px-2 py-0.5 rounded uppercase tracking-tighter",children:"Fermé"}):s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xs font-bold text-slate-900",children:e.ouverture}),s.jsx("span",{className:"text-[10px] text-slate-300 font-bold uppercase tracking-widest",children:"à"}),s.jsx("span",{className:"text-xs font-bold text-slate-900",children:e.fermeture})]})]},t))})]})]}),s.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-3 z-10 sticky bottom-0",children:s.jsx("button",{onClick:()=>N(null),className:"px-6 py-2 bg-slate-900 text-white rounded-lg text-xs font-bold uppercase tracking-widest hover:bg-slate-800 transition-all shadow-lg shadow-slate-900/10",children:"Fermer la fiche"})})]})})]})};export{m as default};
