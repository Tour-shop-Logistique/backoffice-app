import{c as e,j as s,u as t,a,k as r,L as i,B as l,C as n,D as d,E as o}from"./index-BzHVKazg.js";import{r as c}from"./router-BcYogCAZ.js";import{M as x}from"./Modal-B5a8TwpY.js";import{M as m}from"./map-pin-4DoO1x-I.js";import{P as h}from"./plus-D5hcpemk.js";import{C as p}from"./circle-check-DcHPPs-h.js";import{C as u}from"./circle-x-21-KegWw.js";import{S as g}from"./search-CasI9TsS.js";import{C as j}from"./circle-alert-DNr8XIBQ.js";import{P as f}from"./pen-pg3U8McX.js";import{T as y}from"./trash-2-c8cfoBNg.js";import"./vendor-DOHx2j1n.js";import"./x-sDzYkWd9.js";
/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=e("earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),N=({onSubmit:e,onCancel:t,isLoading:a,initialData:r})=>{const[i,l]=c.useState({id:"",nom:"",pays:""});c.useEffect(()=>{r&&l({id:r.id||"",nom:r.nom||"",pays:Array.isArray(r.pays)?r.pays.join(", "):""})},[r]);const n=e=>{l({...i,[e.target.name]:e.target.value})};return s.jsxs("form",{onSubmit:s=>{s.preventDefault();const t=i.pays.split(",").map(e=>e.trim());e({...i,pays:t})},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"id",className:"block text-sm font-medium text-gray-700",children:"ID de la Zone"}),s.jsx("input",{id:"id",name:"id",type:"text",value:i.id,onChange:n,className:"w-full px-3 py-2 mt-1 border rounded-md",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700",children:"Nom de la Zone"}),s.jsx("input",{id:"nom",name:"nom",type:"text",value:i.nom,onChange:n,className:"w-full px-3 py-2 mt-1 border rounded-md",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"pays",className:"block text-sm font-medium text-gray-700",children:"Pays (séparés par des virgules)"}),s.jsx("input",{id:"pays",name:"pays",type:"text",value:i.pays,onChange:n,className:"w-full px-3 py-2 mt-1 border rounded-md",required:!0})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Annuler"}),s.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 disabled:opacity-50",disabled:a,children:a?r?"Modification...":"Ajout...":r?"Modifier":"Ajouter"})]})]})},v=()=>{const e=t(),{zones:v,isLoading:w,error:C}=a(e=>e.zones),[k,z]=c.useState(!1),[S,A]=c.useState(!1),[M,L]=c.useState(null),[I,Z]=c.useState({}),[D,q]=c.useState(""),[E,F]=c.useState("all");c.useEffect(()=>{v.length||e(r())},[e]);const P=v.filter(e=>{const s=e.nom.toLowerCase().includes(D.toLowerCase())||e.pays.some(e=>e.toLowerCase().includes(D.toLowerCase())),t="all"===E||"active"===E&&e.actif||"inactive"===E&&!e.actif;return s&&t});return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-6 lg:p-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg",children:s.jsx(m,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"Configuration des Zones"}),s.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Gérez les zones géographiques de livraison"})]})]}),s.jsxs("button",{onClick:()=>z(!0),className:"flex items-center space-x-2 px-5 py-3 text-white bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-200 shadow-md",children:[s.jsx(h,{className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:"Ajouter une Zone"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Total Zones"}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:v.length})]}),s.jsx("div",{className:"w-12 h-12 rounded-lg bg-indigo-50 flex items-center justify-center",children:s.jsx(m,{className:"h-6 w-6 text-indigo-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Zones Actives"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.filter(e=>e.actif).length})]}),s.jsx("div",{className:"w-12 h-12 rounded-lg bg-green-50 flex items-center justify-center",children:s.jsx(p,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Zones Inactives"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:v.filter(e=>!e.actif).length})]}),s.jsx("div",{className:"w-12 h-12 rounded-lg bg-red-50 flex items-center justify-center",children:s.jsx(u,{className:"h-6 w-6 text-red-600"})})]})})]}),s.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(g,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher par nom ou pays...",value:D,onChange:e=>q(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all"})]}),s.jsx("div",{className:"relative",children:s.jsxs("select",{value:E,onChange:e=>F(e.target.value),className:"pl-4 pr-10 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all appearance-none cursor-pointer",children:[s.jsx("option",{value:"all",children:"Tous les statuts"}),s.jsx("option",{value:"active",children:"Actives uniquement"}),s.jsx("option",{value:"inactive",children:"Inactives uniquement"})]})})]}),w&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[s.jsx(i,{className:"h-12 w-12 text-indigo-600 animate-spin mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Chargement des zones..."})]}),C&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-center space-x-3 mb-6",children:[s.jsx(j,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),s.jsxs("p",{className:"text-red-700",children:["Erreur: ",C.message||"Impossible de charger les zones"]})]}),!w&&!C&&s.jsxs("div",{className:"bg-white shadow-sm rounded-xl overflow-hidden border border-gray-200",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Nom de la Zone"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Pays Couverts"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:P.map(t=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-lg bg-indigo-100 text-indigo-700 text-sm font-bold",children:t.id})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:s.jsx(m,{className:"h-5 w-5 text-white"})}),s.jsx("span",{className:"text-sm font-semibold text-gray-900",children:t.nom})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.pays.map((e,t)=>s.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium bg-blue-50 text-blue-700 border border-blue-200",children:[s.jsx(b,{className:"h-3 w-3 mr-1"}),e]},t))})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[I[t.id]?s.jsx(i,{className:"animate-spin h-5 w-5 text-gray-500"}):s.jsx("button",{onClick:()=>(async(s,t)=>{try{Z(e=>({...e,[s]:!0}));const a=!t;await e(l({zoneId:s,status:a})).unwrap()}catch(a){console.error("Erreur lors du changement de statut:",a)}finally{Z(e=>({...e,[s]:!1}))}})(t.id,t.actif),className:"relative inline-flex h-7 w-12 items-center rounded-full transition-all duration-200 "+(t.actif?"bg-gradient-to-r from-green-500 to-emerald-500 shadow-md":"bg-gray-300"),disabled:I[t.id],children:s.jsx("span",{className:"inline-block h-5 w-5 transform rounded-full bg-white shadow-lg transition-transform duration-200 "+(t.actif?"translate-x-6":"translate-x-1")})}),s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold "+(t.actif?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:t.actif?s.jsxs(s.Fragment,{children:[s.jsx(p,{className:"h-3 w-3 mr-1"}),"Actif"]}):s.jsxs(s.Fragment,{children:[s.jsx(u,{className:"h-3 w-3 mr-1"}),"Inactif"]})})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:()=>(e=>{L(e),A(!0)})(t),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Modifier",children:s.jsx(f,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{return s=t.id,void(window.confirm("Êtes-vous sûr de vouloir supprimer cette zone ?")&&e(n(s)));var s},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:s.jsx(y,{className:"h-4 w-4"})})]})})]},t.id))})]})}),0===P.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(m,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Aucune zone trouvée"}),s.jsx("p",{className:"text-gray-500",children:D||"all"!==E?"Essayez de modifier vos critères de recherche":"Commencez par ajouter une nouvelle zone"})]})]}),s.jsx(x,{isOpen:k,onClose:()=>z(!1),title:"Ajouter une nouvelle zone",children:s.jsx(N,{onSubmit:s=>{e(d(s)).then(s=>{d.fulfilled.match(s)&&(z(!1),e(r()))})},onCancel:()=>z(!1),isLoading:w})}),M&&s.jsx(x,{isOpen:S,onClose:()=>A(!1),title:"Modifier la zone",children:s.jsx(N,{onSubmit:s=>{e(o({zoneId:M.id,zoneData:s})).then(s=>{o.fulfilled.match(s)&&(A(!1),L(null),e(r()))})},onCancel:()=>A(!1),isLoading:w,initialData:M})})]})};export{v as default};
