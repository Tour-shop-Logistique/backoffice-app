import{c as e,u as t,a as s,k as a,j as r,L as i,m as n,n as l,o,q as d,t as c}from"./index-BzHVKazg.js";import{r as x,d as p}from"./router-BcYogCAZ.js";import{M as m}from"./Modal-B5a8TwpY.js";import{M as h}from"./map-pin-4DoO1x-I.js";import{T as u}from"./trash-2-c8cfoBNg.js";import{C as g}from"./chevron-down-Cyk656mU.js";import{D as b}from"./dollar-sign-BHmloM01.js";import{P as f}from"./plus-D5hcpemk.js";import{S as j}from"./save-87gxxQbU.js";import{C as N}from"./circle-alert-DNr8XIBQ.js";import{C as y}from"./circle-plus-PKmViBFI.js";import{C as v}from"./circle-x-21-KegWw.js";import{A as _}from"./arrow-right-C6f_eq3V.js";import"./vendor-DOHx2j1n.js";import"./x-sDzYkWd9.js";
/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=e("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),w=e("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),k=e("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),C=e("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),M=e("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]),S=e("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),F=e("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),L=({onSubmit:e,onCancel:n,isLoading:l,initialData:o})=>{const d=t(),{zones:c}=s(e=>e.zones),[p,m]=x.useState({indice:"",prix_zones:[{zone_destination_id:"",montant_base:"",pourcentage_prestation:"",montant_prestation:"0.00",montant_expedition:"0.00"}]});x.useEffect(()=>{d(a()),o&&m({...o,prix_zones:o.prix_zones.map(e=>{const t=parseFloat(e.montant_base)||0,s=parseFloat(e.pourcentage_prestation)||0,a=t*(s/100),r=t+a;return{...e,montant_base:t,pourcentage_prestation:s,montant_prestation:a.toFixed(2),montant_expedition:r.toFixed(2)}})})},[d,o]);const y=(e,t,s)=>{const a=[...p.prix_zones];a[e][t]=s;const r=parseFloat(a[e].montant_base)||0,i=r*((parseFloat(a[e].pourcentage_prestation)||0)/100),n=r+i;a[e].montant_prestation=i.toFixed(2),a[e].montant_expedition=n.toFixed(2),m({...p,prix_zones:a})},v="w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-slate-900/5 focus:border-slate-900 outline-none transition-all placeholder:text-gray-400 text-sm font-medium text-gray-700",_="block text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-1.5 ml-1";return r.jsxs("form",{onSubmit:t=>{t.preventDefault();const s={indice:Number(p.indice),zones:p.prix_zones.map(e=>({id:e.id,zone_destination_id:e.zone_destination_id,montant_base:Number(e.montant_base),pourcentage_prestation:Number(e.pourcentage_prestation)}))};e(s)},className:"space-y-6 relative pb-8",children:[r.jsx("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200 relative overflow-hidden",children:r.jsxs("div",{className:"relative",children:[r.jsx("label",{className:_,children:"Indice de Tarification"}),r.jsxs("div",{className:"relative",children:[r.jsx(z,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),r.jsx("input",{type:"number",value:p.indice,onChange:e=>m({...p,indice:e.target.value}),step:"0.1",min:"0",placeholder:"Ex: 1.5, 2.0...",className:`${v} bg-white`,required:!0})]}),r.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2 px-1 uppercase tracking-wider",children:"L'indice permet d'identifier cette grille tarifaire spécifique."})]})}),r.jsxs("div",{className:"flex items-center justify-between px-2 pt-4",children:[r.jsxs("h3",{className:"text-xl font-black text-gray-900 flex items-center gap-2 tracking-tight",children:[r.jsx(h,{className:"text-indigo-600",size:22}),"Configuration par Zone"]}),r.jsxs("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 px-3 py-1 rounded-full",children:[p.prix_zones.length," zones configurées"]})]}),r.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto px-1 pr-2 custom-scrollbar",children:p.prix_zones.map((e,t)=>r.jsxs("div",{className:"group relative bg-white p-6 rounded-xl border border-gray-200 shadow-sm transition-all",children:[p.prix_zones.length>1&&r.jsx("button",{type:"button",onClick:()=>(e=>{const t=p.prix_zones.filter((t,s)=>s!==e);m({...p,prix_zones:t})})(t),className:"absolute -top-2 -right-2 p-2 bg-white border border-red-100 text-red-500 rounded-xl shadow-lg hover:bg-red-50 hover:scale-110 transition-all opacity-0 group-hover:opacity-100 z-10",title:"Supprimer cette zone",children:r.jsx(u,{size:16})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 items-end",children:[r.jsxs("div",{className:"md:col-span-4",children:[r.jsx("label",{className:_,children:"Zone de Destination"}),r.jsxs("div",{className:"relative",children:[r.jsx(h,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),r.jsxs("select",{value:e.zone_destination_id,onChange:e=>y(t,"zone_destination_id",e.target.value),className:`${v} appearance-none cursor-pointer`,required:!0,children:[r.jsx("option",{value:"",children:"Choisir une zone"}),c.map(e=>r.jsx("option",{value:e.id,children:e.nom},e.id))]}),r.jsx(g,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",size:18})]})]}),r.jsxs("div",{className:"md:col-span-4",children:[r.jsx("label",{className:_,children:"Montant de Base (FCFA)"}),r.jsxs("div",{className:"relative",children:[r.jsx(b,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-green-500",size:18}),r.jsx("input",{type:"number",value:e.montant_base,onChange:e=>y(t,"montant_base",e.target.value),placeholder:"0.00",min:"0",step:"0.01",className:v,required:!0})]})]}),r.jsxs("div",{className:"md:col-span-4",children:[r.jsx("label",{className:_,children:"Prestation (%)"}),r.jsxs("div",{className:"relative",children:[r.jsx(F,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-orange-400",size:18}),r.jsx("input",{type:"number",value:e.pourcentage_prestation,onChange:e=>y(t,"pourcentage_prestation",e.target.value),placeholder:"0",min:"0",max:"100",step:"0.1",className:v,required:!0})]})]}),r.jsxs("div",{className:"md:col-span-12 grid grid-cols-2 gap-4 mt-2",children:[r.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg flex items-center justify-between border border-gray-200",children:[r.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Montant Prestation"}),r.jsxs("span",{className:"text-sm font-bold text-gray-600",children:[parseFloat(e.montant_prestation).toLocaleString()," ",r.jsx("span",{className:"text-[10px]",children:"FCFA"})]})]}),r.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg flex items-center justify-between border border-slate-200",children:[r.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Total Expédition"}),r.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[parseFloat(e.montant_expedition).toLocaleString()," ",r.jsx("span",{className:"text-[10px]",children:"FCFA"})]})]})]})]})]},t))}),r.jsx("div",{className:"pt-2",children:r.jsxs("button",{type:"button",onClick:()=>{m({...p,prix_zones:[...p.prix_zones,{zone_destination_id:"",montant_base:"",pourcentage_prestation:"",montant_prestation:"0.00",montant_expedition:"0.00"}]})},className:"flex items-center gap-2 px-6 py-3 bg-white border border-dashed border-slate-300 text-slate-600 rounded-lg font-semibold hover:border-slate-400 hover:bg-slate-50 transition-colors w-full justify-center text-sm",children:[r.jsx(f,{size:18}),"Ajouter une autre zone de destination"]})}),r.jsxs("div",{className:"pt-6 border-t border-gray-100 flex flex-col sm:flex-row gap-3",children:[r.jsx("button",{type:"button",onClick:n,className:"order-2 sm:order-1 flex-1 px-6 py-2.5 text-xs font-bold uppercase tracking-widest text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:"Annuler"}),r.jsx("button",{type:"submit",disabled:l,className:"order-1 sm:order-2 flex-1 px-6 py-2.5 bg-slate-900 hover:bg-slate-800 text-white rounded-lg font-bold uppercase tracking-widest transition-colors flex items-center justify-center gap-2 text-xs",children:l?r.jsx(i,{className:"animate-spin",size:16}):r.jsxs(r.Fragment,{children:[r.jsx(j,{size:16}),o?"Mettre à jour":"Enregistrer"]})})]}),r.jsxs("div",{className:"mt-6 flex gap-3 p-4 bg-amber-50 rounded-lg border border-amber-100",children:[r.jsx(N,{className:"text-amber-500 shrink-0",size:16}),r.jsx("p",{className:"text-[10px] leading-relaxed font-bold text-amber-700 uppercase tracking-wider",children:"Vérifiez bien vos montants avant d'enregistrer. L'expédition totale est calculée automatiquement par : (Montant Base + (Montant Base * Pourcentage))"})]})]})},q=()=>{const e=t(),{tarifs:g,isLoading:b,error:f}=s(e=>e.tarification),{zones:j}=s(e=>e.zones),[N,z]=x.useState(!1),[F,q]=x.useState(null),[P,A]=x.useState(!1),[E,D]=x.useState(!1),[$,G]=x.useState(null),[T,O]=x.useState(!1),[B,V]=x.useState(!1);x.useEffect(()=>{e(n()),e(a())},[e]);const Z=e=>{q(e),A(!0)},I=e=>{G(e),D(!0)},H=p.useMemo(()=>{if(!g)return[];const e=g.filter(e=>"simple"===e.type_expedition),t={};return e.forEach(e=>{const s=`${e.indice}-${e.pays}`;t[s]||(t[s]={...e,prix_zones:[]}),t[s].prix_zones.push(e)}),Object.values(t).sort((e,t)=>parseFloat(e.indice)-parseFloat(t.indice))},[g]);return b&&0===H.length?r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[r.jsx(i,{className:"animate-spin text-indigo-600",size:48}),r.jsx("p",{className:"text-gray-500 font-medium text-lg italic",children:"Chargement des tarifs simples..."})]}):r.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[r.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900 tracking-tight flex items-center gap-2",children:"Tarification Standard"}),r.jsx("p",{className:"text-slate-500 mt-1 text-sm font-medium italic",children:"Configurez les grilles de prix fixes basées sur les zones géographiques."})]}),r.jsxs("button",{onClick:()=>{q(null),z(!0)},className:"flex items-center gap-2 px-5 py-2 bg-slate-900 hover:bg-slate-800 text-white rounded-lg text-sm font-bold transition-all shadow-lg shadow-slate-900/10",children:[r.jsx(y,{size:16}),"Nouvelle Grille"]})]}),f&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-100 rounded-lg flex items-center gap-3 text-red-700 font-bold text-xs uppercase tracking-wide",children:[r.jsx(v,{size:16}),f]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[r.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm",children:[r.jsxs("div",{className:"px-4 py-3 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[r.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Grilles Disponibles"}),r.jsxs("span",{className:"text-[10px] font-bold text-slate-400",children:[H.length," total"]})]}),0===H.length?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(M,{size:32,className:"text-slate-200 mx-auto mb-3"}),r.jsx("p",{className:"text-slate-400 text-xs font-medium uppercase tracking-wider",children:"Aucun tarif configuré"})]}):r.jsx("div",{className:"divide-y divide-slate-100 max-h-[calc(100vh-280px)] overflow-y-auto custom-scrollbar",children:H.map(t=>{const s=F?.indice===t.indice&&F?.pays===t.pays;return r.jsxs("div",{onClick:()=>q(t),className:"group relative flex items-center justify-between p-4 cursor-pointer transition-all hover:bg-slate-50 "+(s?"bg-slate-50 ring-1 ring-inset ring-slate-900/5":""),children:[s&&r.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-slate-900"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-8 h-8 rounded flex items-center justify-center font-bold text-xs "+(s?"bg-slate-900 text-white":"bg-slate-100 text-slate-500"),children:t.indice}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-bold "+(s?"text-slate-900":"text-slate-700"),children:["Configuration ",t.indice]}),r.jsx("p",{className:"text-[11px] text-slate-400 font-medium uppercase tracking-tight",children:t.pays})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"hidden group-hover:flex items-center gap-1",children:[r.jsx("button",{onClick:e=>{e.stopPropagation(),Z(t)},className:"p-1.5 text-slate-400 hover:text-slate-900 hover:bg-white rounded border border-transparent hover:border-slate-200 transition-all",children:r.jsx(S,{size:14})}),r.jsx("button",{onClick:e=>{e.stopPropagation(),I(t)},className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded border border-transparent hover:border-red-100 transition-all",children:r.jsx(u,{size:14})})]}),r.jsx("button",{onClick:s=>{s.stopPropagation(),(async t=>{try{const s=t.prix_zones.map(t=>e(l(t.id)));await Promise.all(s),e(n())}catch(s){console.error("Erreur lors du changement de statut:",s)}})(t)},className:"w-2 h-2 rounded-full "+(t.actif?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.4)]":"bg-slate-300"),title:t.actif?"Actif":"Inactif"}),r.jsx(w,{size:16,className:"transition-transform duration-200 "+(s?"text-slate-900 translate-x-1":"text-slate-300")})]})]},`${t.indice}-${t.pays}`)})})]}),r.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl flex gap-3",children:[r.jsx(k,{size:16,className:"text-slate-400 shrink-0 mt-0.5"}),r.jsx("p",{className:"text-[11px] leading-relaxed text-slate-500 font-medium",children:"Les grilles tarifaires standard s'appliquent automatiquement aux expéditions de type \"Simple\". Les tarifs sont calculés sur une base fixe par zone, à laquelle s'ajoute une commission de prestation."})]})]}),r.jsx("div",{className:"lg:col-span-7",children:r.jsx("div",{className:"sticky top-6",children:F?r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-white flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-1.5 bg-slate-100 rounded text-slate-600",children:r.jsx(C,{size:16})}),r.jsxs("h2",{className:"text-sm font-bold text-slate-900 uppercase tracking-widest",children:["Détails de la Grille #",F.indice]})]}),r.jsxs("button",{onClick:()=>Z(F),className:"text-[10px] font-bold text-slate-500 hover:text-slate-900 uppercase tracking-widest flex items-center gap-1.5 px-3 py-1.5 rounded-lg hover:bg-slate-50 transition-colors",children:[r.jsx(S,{size:12})," Modifier la grille"]})]}),r.jsxs("div",{className:"p-6 space-y-8 overflow-y-auto max-h-[calc(100vh-250px)] custom-scrollbar",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-100",children:[r.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-1",children:"Zones"}),r.jsx("p",{className:"text-lg font-bold text-slate-900",children:F.prix_zones.length})]}),r.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-100",children:[r.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-1",children:"Pays cible"}),r.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:F.pays})]}),r.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-100",children:[r.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-1",children:"Statut"}),r.jsx("span",{className:"text-[10px] font-bold uppercase tracking-tight py-0.5 px-2 rounded-full border "+(F.actif?"bg-green-50 border-green-100 text-green-600":"bg-slate-100 border-slate-200 text-slate-400"),children:F.actif?"Opérationnel":"Désactivé"})]})]}),r.jsxs("section",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest whitespace-nowrap",children:"Ventilation par zone"}),r.jsx("div",{className:"h-px bg-slate-100 w-full"})]}),r.jsx("div",{className:"space-y-3",children:F.prix_zones.map((e,t)=>{const s=j.find(t=>t.id===e.zone_destination_id);return r.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-slate-100 rounded-lg hover:border-slate-200 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-50 flex items-center justify-center border border-slate-100 text-slate-400",children:r.jsx(h,{size:14})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-slate-800",children:s?.nom||`Zone ${e.zone_destination_id}`}),r.jsxs("p",{className:"text-[10px] font-medium text-slate-400 italic",children:["Prestation de ",e.pourcentage_prestation,"% incluse"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[e.montant_expedition.toLocaleString()," FCFA"]}),r.jsxs("div",{className:"flex items-center justify-end gap-2 mt-0.5",children:[r.jsxs("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-tighter",children:["Base: ",e.montant_base.toLocaleString()]}),r.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-tighter",children:"+"}),r.jsx("span",{className:"text-[9px] font-bold text-indigo-500 uppercase tracking-tighter",children:e.montant_prestation.toLocaleString()})]})]})]},t)})})]}),r.jsx("div",{className:"pt-6 border-t border-slate-50 flex justify-end",children:r.jsxs("button",{onClick:()=>I(F),className:"text-[9px] font-bold text-slate-300 hover:text-red-500 uppercase tracking-widest transition-colors flex items-center gap-1.5",children:[r.jsx(u,{size:10})," Supprimer cette grille tarifaire"]})})]})]}):r.jsxs("div",{className:"bg-white rounded-xl border border-dashed border-slate-200 p-16 text-center shadow-sm",children:[r.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-lg flex items-center justify-center mx-auto mb-6 border border-slate-100",children:r.jsx(_,{size:24,className:"text-slate-300"})}),r.jsx("h3",{className:"text-sm font-bold text-slate-800 uppercase tracking-widest",children:"Gestion des Tarifs"}),r.jsx("p",{className:"text-xs text-slate-400 mt-2 max-w-[240px] mx-auto leading-relaxed",children:"Sélectionnez une grille tarifaire dans la liste de gauche pour consulter ou modifier la répartition des prix par zone."}),r.jsx("div",{className:"mt-8 pt-8 border-t border-slate-50",children:r.jsx("p",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-tighter italic",children:'"La précision des tarifs garantit la transparence client"'})})]})})})]}),r.jsx(m,{isOpen:N,onClose:()=>z(!1),title:"Configuration Grille Tarifaire",size:"4xl",children:r.jsx("div",{className:"p-4",children:r.jsx(L,{onSubmit:async t=>{O(!0);try{const s=t.zones.map(s=>e(o({indice:t.indice,montant_base:s.montant_base,zone_destination_id:s.zone_destination_id,pourcentage_prestation:s.pourcentage_prestation})));await Promise.all(s),z(!1),e(n())}catch(s){console.error("Erreur lors de l'ajout des tarifs:",s)}finally{O(!1)}},onCancel:()=>z(!1),isLoading:T,zones:j,tarifs:g})})}),F&&r.jsx(m,{isOpen:P,onClose:()=>A(!1),title:`Édition Grille #${F.indice}`,size:"4xl",children:r.jsx("div",{className:"p-4",children:r.jsx(L,{onSubmit:async t=>{O(!0);try{const s=t.zones.map(s=>s.id?e(d({tarifId:s.id,tarifData:{indice:t.indice,montant_base:s.montant_base,zone_destination_id:s.zone_destination_id,pourcentage_prestation:s.pourcentage_prestation}})):e(o({indice:t.indice,montant_base:s.montant_base,zone_destination_id:s.zone_destination_id,pourcentage_prestation:s.pourcentage_prestation})));await Promise.all(s),A(!1),q(null),e(n())}catch(s){console.error("Erreur lors de la modification des tarifs:",s)}finally{O(!1)}},onCancel:()=>A(!1),isLoading:T,initialData:F,zones:j,tarifs:g})})}),r.jsx(m,{isOpen:E,onClose:()=>!B&&D(!1),title:"Validation de suppression",size:"md",children:r.jsxs("div",{className:"p-6 flex flex-col items-center",children:[r.jsx("div",{className:"w-14 h-14 bg-red-50 text-red-500 rounded-full flex items-center justify-center mb-5 border border-red-100",children:r.jsx(u,{size:24})}),r.jsx("h4",{className:"text-lg font-bold text-slate-900 mb-2",children:"Retirer cette tarification ?"}),r.jsxs("p",{className:"text-slate-500 text-sm text-center mb-8 px-4 leading-relaxed",children:["Vous êtes sur le point de supprimer définitivement la grille ",r.jsxs("span",{className:"font-bold text-slate-900",children:["#",$?.indice]}),". Cette opération impactera les calculs de prix futurs."]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full",children:[r.jsx("button",{onClick:()=>D(!1),disabled:B,className:"px-4 py-2.5 bg-slate-100 text-slate-600 rounded-lg text-xs font-bold uppercase tracking-widest hover:bg-slate-200 transition-colors",children:"Annuler"}),r.jsx("button",{onClick:async()=>{if($){V(!0);try{const t=$.prix_zones.map(t=>e(c(t.id)));await Promise.all(t),F?.indice===$.indice&&F?.pays===$.pays&&q(null),D(!1),G(null),e(n())}catch(t){console.error("Erreur lors de la suppression des tarifs:",t)}finally{V(!1)}}},disabled:B,className:"px-4 py-2.5 bg-red-600 text-white rounded-lg text-xs font-bold uppercase tracking-widest hover:bg-red-700 transition-all flex items-center justify-center gap-2 shadow-lg shadow-red-600/10",children:B?r.jsx(i,{size:14,className:"animate-spin"}):"Supprimer"})]})]})})]})};export{q as default};
