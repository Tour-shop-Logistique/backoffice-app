import{c as e,j as t,u as s,a as r,v as a,w as n,x as i,z as o,y as l,A as u}from"./index-BzHVKazg.js";import{r as c,d}from"./router-BcYogCAZ.js";import{g as p}from"./vendor-DOHx2j1n.js";import{X as h}from"./x-sDzYkWd9.js";import{P as m}from"./plus-D5hcpemk.js";import{S as f}from"./search-CasI9TsS.js";import{G as x}from"./globe-BsE_C94I.js";import{P as g}from"./package-BNT_gd56.js";
/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=e("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),y=e("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),v=e("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),_=e("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),j=e("plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]),w=e("ship",[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]]),A=e("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),E=e("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),N=e("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var O,k;var T,F,D=function(){if(k)return O;function e(e){this._maxSize=e,this.clear()}k=1,e.prototype.clear=function(){this._size=0,this._values=Object.create(null)},e.prototype.get=function(e){return this._values[e]},e.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var t=/[^.^\]^[]+|(?=\[\]|\.\.)/g,s=/^\d+$/,r=/^\d/,a=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,n=/^\s*(['"]?)(.*?)(\1)\s*$/,i=new e(512),o=new e(512),l=new e(512);function u(e){return i.get(e)||i.set(e,c(e).map(function(e){return e.replace(n,"$2")}))}function c(e){return e.match(t)||[""]}function d(e){return"string"==typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function p(e){return!d(e)&&(function(e){return e.match(r)&&!e.match(s)}(e)||function(e){return a.test(e)}(e))}return O={Cache:e,split:c,normalizePath:u,setter:function(e){var t=u(e);return o.get(e)||o.set(e,function(e,s){for(var r=0,a=t.length,n=e;r<a-1;){var i=t[r];if("__proto__"===i||"constructor"===i||"prototype"===i)return e;n=n[t[r++]]}n[t[r]]=s})},getter:function(e,t){var s=u(e);return l.get(e)||l.set(e,function(e){for(var r=0,a=s.length;r<a;){if(null==e&&t)return;e=e[s[r++]]}return e})},join:function(e){return e.reduce(function(e,t){return e+(d(t)||s.test(t)?"["+t+"]":(e?".":"")+t)},"")},forEach:function(e,t,s){!function(e,t,s){var r,a,n,i,o=e.length;for(a=0;a<o;a++)(r=e[a])&&(p(r)&&(r='"'+r+'"'),n=!(i=d(r))&&/^\d+$/.test(r),t.call(s,r,i,n,a,e))}(Array.isArray(e)?e:c(e),t,s)}}}();var I,S=function(){if(F)return T;F=1;const e=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['â€™](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['â€™](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['â€™](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['â€™](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,t=t=>t.match(e)||[],s=e=>e[0].toUpperCase()+e.slice(1),r=(e,s)=>t(e).join(s).toLowerCase(),a=e=>t(e).reduce((e,t)=>`${e}${e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}`,"");return T={words:t,upperFirst:s,camelCase:a,pascalCase:e=>s(a(e)),snakeCase:e=>r(e,"_"),kebabCase:e=>r(e,"-"),sentenceCase:e=>s(r(e," ")),titleCase:e=>t(e).map(s).join(" ")}}(),C={exports:{}};const $=p(function(){if(I)return C.exports;function e(e,t){var s=e.length,r=new Array(s),a={},n=s,i=function(e){for(var t=new Map,s=0,r=e.length;s<r;s++){var a=e[s];t.has(a[0])||t.set(a[0],new Set),t.has(a[1])||t.set(a[1],new Set),t.get(a[0]).add(a[1])}return t}(t),o=function(e){for(var t=new Map,s=0,r=e.length;s<r;s++)t.set(e[s],s);return t}(e);for(t.forEach(function(e){if(!o.has(e[0])||!o.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});n--;)a[n]||l(e[n],n,new Set);return r;function l(e,t,n){if(n.has(e)){var u;try{u=", node was:"+JSON.stringify(e)}catch(p){u=""}throw new Error("Cyclic dependency"+u)}if(!o.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!a[t]){a[t]=!0;var c=i.get(e)||new Set;if(t=(c=Array.from(c)).length){n.add(e);do{var d=c[--t];l(d,o.get(d),n)}while(t);n.delete(e)}r[--s]=e}}}return I=1,C.exports=function(t){return e(function(e){for(var t=new Set,s=0,r=e.length;s<r;s++){var a=e[s];t.add(a[0]),t.add(a[1])}return Array.from(t)}(t),t)},C.exports.array=e,C.exports}()),R=Object.prototype.toString,M=Error.prototype.toString,U=RegExp.prototype.toString,G="undefined"!=typeof Symbol?Symbol.prototype.toString:()=>"",P=/^Symbol\((.*)\)(.*)$/;function L(e,t=!1){if(null==e||!0===e||!1===e)return""+e;const s=typeof e;if("number"===s)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===s)return t?`"${e}"`:e;if("function"===s)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===s)return G.call(e).replace(P,"Symbol($1)");const r=R.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+M.call(e)+"]":"RegExp"===r?U.call(e):null}function z(e,t){let s=L(e,t);return null!==s?s:JSON.stringify(e,function(e,s){let r=L(this[e],t);return null!==r?r:s},2)}function V(e){return null==e?[]:[].concat(e)}let q,H,B,Z=/\$\{\s*(\w+)\s*\}/g;q=Symbol.toStringTag;class K{constructor(e,t,s,r){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[q]="Error",this.name="ValidationError",this.value=t,this.path=s,this.type=r,this.errors=[],this.inner=[],V(e).forEach(e=>{if(Y.isError(e)){this.errors.push(...e.errors);const t=e.inner.length?e.inner:[e];this.inner.push(...t)}else this.errors.push(e)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}H=Symbol.hasInstance,B=Symbol.toStringTag;class Y extends Error{static formatError(e,t){const s=t.label||t.path||"this";return t=Object.assign({},t,{path:s,originalPath:t.path}),"string"==typeof e?e.replace(Z,(e,s)=>z(t[s])):"function"==typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,s,r,a){const n=new K(e,t,s,r);if(a)return n;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[B]="Error",this.name=n.name,this.message=n.message,this.type=n.type,this.value=n.value,this.path=n.path,this.errors=n.errors,this.inner=n.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Y)}static[H](e){return K[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let Q={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:s,originalValue:r})=>{const a=null!=r&&r!==s?` (cast from the value \`${z(r,!0)}\`).`:".";return"mixed"!==t?`${e} must be a \`${t}\` type, but the final value was: \`${z(s,!0)}\``+a:`${e} must match the configured type. The validated value was: \`${z(s,!0)}\``+a}},J={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},W={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},X={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},ee={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},te={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},se={notType:e=>{const{path:t,value:s,spec:r}=e,a=r.types.length;if(Array.isArray(s)){if(s.length<a)return`${t} tuple value has too few items, expected a length of ${a} but got ${s.length} for value: \`${z(s,!0)}\``;if(s.length>a)return`${t} tuple value has too many items, expected a length of ${a} but got ${s.length} for value: \`${z(s,!0)}\``}return Y.formatError(Q.notType,e)}};Object.assign(Object.create(null),{mixed:Q,string:J,number:W,date:X,object:ee,array:te,boolean:{isValue:"${path} field must be ${value}"},tuple:se});const re=e=>e&&e.__isYupSchema__;class ae{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:s,then:r,otherwise:a}=t,n="function"==typeof s?s:(...e)=>e.every(e=>e===s);return new ae(e,(e,t)=>{var s;let i=n(...e)?r:a;return null!=(s=null==i?void 0:i(t))?s:t})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let s=this.refs.map(e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context)),r=this.fn(s,e,t);if(void 0===r||r===e)return e;if(!re(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}const ne="$",ie=".";class oe{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!=typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===ne,this.isValue=this.key[0]===ie,this.isSibling=!this.isContext&&!this.isValue;let s=this.isContext?ne:this.isValue?ie:"";this.path=this.key.slice(s.length),this.getter=this.path&&D.getter(this.path,!0),this.map=t.map}getValue(e,t,s){let r=this.isContext?s:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}oe.prototype.__isYupRef=!0;const le=e=>null==e;function ue(e){function t({value:t,path:s="",options:r,originalValue:a,schema:n},i,o){const{name:l,test:u,params:c,message:d,skipAbsent:p}=e;let{parent:h,context:m,abortEarly:f=n.spec.abortEarly,disableStackTrace:x=n.spec.disableStackTrace}=r;const g={value:t,parent:h,context:m};function b(e={}){const r=ce(Object.assign({value:t,originalValue:a,label:n.spec.label,path:e.path||s,spec:n.spec,disableStackTrace:e.disableStackTrace||x},c,e.params),g),i=new Y(Y.formatError(e.message||d,r),t,r.path,e.type||l,r.disableStackTrace);return i.params=r,i}const y=f?i:o;let v={path:s,parent:h,type:l,from:r.from,createError:b,resolve:e=>de(e,g),options:r,originalValue:a,schema:n};const _=e=>{Y.isError(e)?y(e):e?o(null):y(b())},j=e=>{Y.isError(e)?y(e):i(e)};if(p&&le(t))return _(!0);let w;try{var A;if(w=u.call(v,t,v),"function"==typeof(null==(A=w)?void 0:A.then)){if(r.sync)throw new Error(`Validation test of type: "${v.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(w).then(_,j)}}catch(E){return void j(E)}_(w)}return t.OPTIONS=e,t}function ce(e,t){if(!e)return e;for(const s of Object.keys(e))e[s]=de(e[s],t);return e}function de(e,t){return oe.isRef(e)?e.getValue(t.value,t.parent,t.context):e}function pe(e,t,s,r=s){let a,n,i;return t?(D.forEach(t,(o,l,u)=>{let c=l?o.slice(1,o.length-1):o,d="tuple"===(e=e.resolve({context:r,parent:a,value:s})).type,p=u?parseInt(c,10):0;if(e.innerType||d){if(d&&!u)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${i}" must contain an index to the tuple element, e.g. "${i}[0]"`);if(s&&p>=s.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${o}, in the path: ${t}. because there is no value at that index. `);a=s,s=s&&s[p],e=d?e.spec.types[p]:e.innerType}if(!u){if(!e.fields||!e.fields[c])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${i} which is a type: "${e.type}")`);a=s,s=s&&s[c],e=e.fields[c]}n=c,i=l?"["+o+"]":"."+o}),{schema:e,parent:a,parentPath:n}):{parent:a,parentPath:t,schema:e}}class he extends Set{describe(){const e=[];for(const t of this.values())e.push(oe.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const s of this.values())t.push(e(s));return t}clone(){return new he(this.values())}merge(e,t){const s=this.clone();return e.forEach(e=>s.add(e)),t.forEach(e=>s.delete(e)),s}}function me(e,t=new Map){if(re(e)||!e||"object"!=typeof e)return e;if(t.has(e))return t.get(e);let s;if(e instanceof Date)s=new Date(e.getTime()),t.set(e,s);else if(e instanceof RegExp)s=new RegExp(e),t.set(e,s);else if(Array.isArray(e)){s=new Array(e.length),t.set(e,s);for(let r=0;r<e.length;r++)s[r]=me(e[r],t)}else if(e instanceof Map){s=new Map,t.set(e,s);for(const[r,a]of e.entries())s.set(r,me(a,t))}else if(e instanceof Set){s=new Set,t.set(e,s);for(const r of e)s.add(me(r,t))}else{if(!(e instanceof Object))throw Error(`Unable to clone ${e}`);s={},t.set(e,s);for(const[r,a]of Object.entries(e))s[r]=me(a,t)}return s}function fe(e){if(null==e||!e.length)return;const t=[];let s="",r=!1,a=!1;for(let n=0;n<e.length;n++){const i=e[n];"["!==i||a?"]"!==i||a?'"'!==i?"."!==i||r||a?s+=i:s&&(t.push(s),s=""):a=!a:(s&&(/^\d+$/.test(s)?t.push(s):t.push(s.replace(/^"|"$/g,"")),s=""),r=!1):(s&&(t.push(...s.split(".").filter(Boolean)),s=""),r=!0)}return s&&t.push(...s.split(".").filter(Boolean)),t}function xe(e,t){var s;if((null==(s=e.inner)||!s.length)&&e.errors.length)return function(e,t){const s=t?`${t}.${e.path}`:e.path;return e.errors.map(e=>({message:e,path:fe(s)}))}(e,t);const r=t?`${t}.${e.path}`:e.path;return e.inner.flatMap(e=>xe(e,r))}class ge{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new he,this._blacklist=new he,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Q.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==e?void 0:e.spec),this.withMutation(e=>{e.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=me(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(0===e.length)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let s=e(this);return this._mutate=t,s}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,s=e.clone();const r=Object.assign({},t.spec,s.spec);return s.spec=r,s.internalTests=Object.assign({},t.internalTests,s.internalTests),s._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),s._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),s.tests=t.tests,s.exclusiveTests=t.exclusiveTests,s.withMutation(t=>{e.tests.forEach(e=>{t.test(e.OPTIONS)})}),s.transforms=[...t.transforms,...s.transforms],s}isType(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let s=t.conditions;t=t.clone(),t.conditions=[],t=s.reduce((t,s)=>s.resolve(t,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,s,r,a;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(s=e.abortEarly)?s:this.spec.abortEarly,recursive:null!=(r=e.recursive)?r:this.spec.recursive,disableStackTrace:null!=(a=e.disableStackTrace)?a:this.spec.disableStackTrace})}cast(e,t={}){let s=this.resolve(Object.assign({},t,{value:e})),r="ignore-optionality"===t.assert,a=s._cast(e,t);if(!1!==t.assert&&!s.isType(a)){if(r&&le(a))return a;let n=z(e),i=z(a);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${s.type}". \n\nattempted value: ${n} \n`+(i!==n?`result of cast: ${i}`:""))}return a}_cast(e,t){let s=void 0===e?e:this.transforms.reduce((s,r)=>r.call(this,s,e,this,t),e);return void 0===s&&(s=this.getDefault(t)),s}_validate(e,t={},s,r){let{path:a,originalValue:n=e,strict:i=this.spec.strict}=t,o=e;i||(o=this._cast(o,Object.assign({assert:!1},t)));let l=[];for(let u of Object.values(this.internalTests))u&&l.push(u);this.runTests({path:a,value:o,originalValue:n,options:t,tests:l},s,e=>{if(e.length)return r(e,o);this.runTests({path:a,value:o,originalValue:n,options:t,tests:this.tests},s,r)})}runTests(e,t,s){let r=!1,{tests:a,value:n,originalValue:i,path:o,options:l}=e,u=e=>{r||(r=!0,t(e,n))},c=e=>{r||(r=!0,s(e,n))},d=a.length,p=[];if(!d)return c([]);let h={value:n,originalValue:i,path:o,options:l,schema:this};for(let m=0;m<a.length;m++){(0,a[m])(h,u,function(e){e&&(Array.isArray(e)?p.push(...e):p.push(e)),--d<=0&&c(p)})}}asNestedTest({key:e,index:t,parent:s,parentPath:r,originalParent:a,options:n}){const i=null!=e?e:t;if(null==i)throw TypeError("Must include `key` or `index` for nested validations");const o="number"==typeof i;let l=s[i];const u=Object.assign({},n,{strict:!0,parent:s,value:l,originalValue:a[i],key:void 0,[o?"index":"key"]:i,path:o||i.includes(".")?`${r||""}[${o?i:`"${i}"`}]`:(r?`${r}.`:"")+e});return(e,t,s)=>this.resolve(u)._validate(l,u,t,s)}validate(e,t){var s;let r=this.resolve(Object.assign({},t,{value:e})),a=null!=(s=null==t?void 0:t.disableStackTrace)?s:r.spec.disableStackTrace;return new Promise((s,n)=>r._validate(e,t,(e,t)=>{Y.isError(e)&&(e.value=t),n(e)},(e,t)=>{e.length?n(new Y(e,t,void 0,void 0,a)):s(t)}))}validateSync(e,t){var s;let r,a=this.resolve(Object.assign({},t,{value:e})),n=null!=(s=null==t?void 0:t.disableStackTrace)?s:a.spec.disableStackTrace;return a._validate(e,Object.assign({},t,{sync:!0}),(e,t)=>{throw Y.isError(e)&&(e.value=t),e},(t,s)=>{if(t.length)throw new Y(t,e,void 0,void 0,n);r=s}),r}isValid(e,t){return this.validate(e,t).then(()=>!0,e=>{if(Y.isError(e))return!1;throw e})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(s){if(Y.isError(s))return!1;throw s}}_getDefault(e){let t=this.spec.default;return null==t?t:"function"==typeof t?t.call(this,e):me(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){if(0===arguments.length)return this._getDefault();return this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,t){const s=this.clone({nullable:e});return s.internalTests.nullable=ue({message:t,name:"nullable",test(e){return null!==e||this.schema.spec.nullable}}),s}optionality(e,t){const s=this.clone({optional:e});return s.internalTests.optionality=ue({message:t,name:"optionality",test(e){return void 0!==e||this.schema.spec.optional}}),s}optional(){return this.optionality(!0)}defined(e=Q.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=Q.notNull){return this.nullability(!1,e)}required(e=Q.required){return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(t=1===e.length?"function"==typeof e[0]?{test:e[0]}:e[0]:2===e.length?{name:e[0],test:e[1]}:{name:e[0],message:e[1],test:e[2]},void 0===t.message&&(t.message=Q.default),"function"!=typeof t.test)throw new TypeError("`test` is a required parameters");let s=this.clone(),r=ue(t),a=t.exclusive||t.name&&!0===s.exclusiveTests[t.name];if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(s.exclusiveTests[t.name]=!!t.exclusive),s.tests=s.tests.filter(e=>{if(e.OPTIONS.name===t.name){if(a)return!1;if(e.OPTIONS.test===r.OPTIONS.test)return!1}return!0}),s.tests.push(r),s}when(e,t){Array.isArray(e)||"string"==typeof e||(t=e,e=".");let s=this.clone(),r=V(e).map(e=>new oe(e));return r.forEach(e=>{e.isSibling&&s.deps.push(e.key)}),s.conditions.push("function"==typeof t?new ae(r,t):ae.fromOptions(r,t)),s}typeError(e){let t=this.clone();return t.internalTests.typeError=ue({message:e,name:"typeError",skipAbsent:!0,test(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}oneOf(e,t=Q.oneOf){let s=this.clone();return e.forEach(e=>{s._whitelist.add(e),s._blacklist.delete(e)}),s.internalTests.whiteList=ue({message:t,name:"oneOf",skipAbsent:!0,test(e){let t=this.schema._whitelist,s=t.resolveAll(this.resolve);return!!s.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:s}})}}),s}notOneOf(e,t=Q.notOneOf){let s=this.clone();return e.forEach(e=>{s._blacklist.add(e),s._whitelist.delete(e)}),s.internalTests.blacklist=ue({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,s=t.resolveAll(this.resolve);return!s.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:s}})}}),s}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:s,meta:r,optional:a,nullable:n}=t.spec;return{meta:r,label:s,optional:a,nullable:n,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.filter((e,t,s)=>s.findIndex(t=>t.OPTIONS.name===e.OPTIONS.name)===t).map(t=>{const s=t.OPTIONS.params&&e?ce(Object.assign({},t.OPTIONS.params),e):t.OPTIONS.params;return{name:t.OPTIONS.name,params:s}})}}get"~standard"(){const e=this;return{version:1,vendor:"yup",async validate(t){try{return{value:await e.validate(t,{abortEarly:!1})}}catch(s){if(s instanceof Y)return{issues:xe(s)};throw s}}}}}ge.prototype.__isYupSchema__=!0;for(const Be of["validate","validateSync"])ge.prototype[`${Be}At`]=function(e,t,s={}){const{parent:r,parentPath:a,schema:n}=pe(this,e,t,s.context);return n[Be](r&&r[a],Object.assign({},s,{parent:r,path:e}))};for(const Be of["equals","is"])ge.prototype[Be]=ge.prototype.oneOf;for(const Be of["not","nope"])ge.prototype[Be]=ge.prototype.notOneOf;const be=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function ye(e){var t,s;const r=be.exec(e);return r?{year:ve(r[1]),month:ve(r[2],1)-1,day:ve(r[3],1),hour:ve(r[4]),minute:ve(r[5]),second:ve(r[6]),millisecond:r[7]?ve(r[7].substring(0,3)):0,precision:null!=(t=null==(s=r[7])?void 0:s.length)?t:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:ve(r[10]),minuteOffset:ve(r[11])}:null}function ve(e,t=0){return Number(e)||t}let _e=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,je=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,we=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ae=new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"),Ee=e=>le(e)||e===e.trim(),Ne={}.toString();function Oe(){return new ke}class ke extends ge{constructor(){super({type:"string",check:e=>(e instanceof String&&(e=e.valueOf()),"string"==typeof e)}),this.withMutation(()=>{this.transform((e,t)=>{if(!this.spec.coerce||this.isType(e))return e;if(Array.isArray(e))return e;const s=null!=e&&e.toString?e.toString():e;return s===Ne?e:s})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||Q.required,name:"required",skipAbsent:!0,test:e=>!!e.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(e=>"required"!==e.OPTIONS.name),e))}length(e,t=J.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e,t=J.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e,t=J.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}matches(e,t){let s,r,a=!1;return t&&("object"==typeof t?({excludeEmptyString:a=!1,message:s,name:r}=t):s=t),this.test({name:r||"matches",message:s||J.matches,params:{regex:e},skipAbsent:!0,test:t=>""===t&&a||-1!==t.search(e)})}email(e=J.email){return this.matches(_e,{name:"email",message:e,excludeEmptyString:!0})}url(e=J.url){return this.matches(je,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=J.uuid){return this.matches(we,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t,s,r="";return e&&("object"==typeof e?({message:r="",allowOffset:t=!1,precision:s}=e):r=e),this.matches(Ae,{name:"datetime",message:r||J.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||J.datetime_offset,params:{allowOffset:t},skipAbsent:!0,test:e=>{if(!e||t)return!0;const s=ye(e);return!!s&&!!s.z}}).test({name:"datetime_precision",message:r||J.datetime_precision,params:{precision:s},skipAbsent:!0,test:e=>{if(!e||null==s)return!0;const t=ye(e);return!!t&&t.precision===s}})}ensure(){return this.default("").transform(e=>null===e?"":e)}trim(e=J.trim){return this.transform(e=>null!=e?e.trim():e).test({message:e,name:"trim",test:Ee})}lowercase(e=J.lowercase){return this.transform(e=>le(e)?e:e.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>le(e)||e===e.toLowerCase()})}uppercase(e=J.uppercase){return this.transform(e=>le(e)?e:e.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>le(e)||e===e.toUpperCase()})}}Oe.prototype=ke.prototype;function Te(){return new Fe}class Fe extends ge{constructor(){super({type:"number",check:e=>(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&!(e=>e!=+e)(e))}),this.withMutation(()=>{this.transform((e,t)=>{if(!this.spec.coerce)return e;let s=e;if("string"==typeof s){if(s=s.replace(/\s/g,""),""===s)return NaN;s=+s}return this.isType(s)||null===s?s:parseFloat(s)})})}min(e,t=W.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t>=this.resolve(e)}})}max(e,t=W.max){return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t<=this.resolve(e)}})}lessThan(e,t=W.lessThan){return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(t){return t<this.resolve(e)}})}moreThan(e,t=W.moreThan){return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(t){return t>this.resolve(e)}})}positive(e=W.positive){return this.moreThan(0,e)}negative(e=W.negative){return this.lessThan(0,e)}integer(e=W.integer){return this.test({name:"integer",message:e,skipAbsent:!0,test:e=>Number.isInteger(e)})}truncate(){return this.transform(e=>le(e)?e:0|e)}round(e){var t;let s=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===s.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+s.join(", "));return this.transform(t=>le(t)?t:Math[e](t))}}Te.prototype=Fe.prototype;let De=new Date("");class Ie extends ge{constructor(){super({type:"date",check(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),this.withMutation(()=>{this.transform((e,t)=>!this.spec.coerce||this.isType(e)||null===e?e:(e=function(e){const t=ye(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(void 0===t.z&&void 0===t.plusMinus)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let s=0;return"Z"!==t.z&&void 0!==t.plusMinus&&(s=60*t.hourOffset+t.minuteOffset,"+"===t.plusMinus&&(s=0-s)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+s,t.second,t.millisecond)}(e),isNaN(e)?Ie.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let s;if(oe.isRef(e))s=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);s=r}return s}min(e,t=X.min){let s=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(e){return e>=this.resolve(s)}})}max(e,t=X.max){let s=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(e){return e<=this.resolve(s)}})}}function Se(e,t){let s=1/0;return e.some((e,r)=>{var a;if(null!=(a=t.path)&&a.includes(e))return s=r,!0}),s}function Ce(e){return(t,s)=>Se(e,t)-Se(e,s)}Ie.INVALID_DATE=De;const $e=(e,t,s)=>{if("string"!=typeof e)return e;let r=e;try{r=JSON.parse(e)}catch(a){}return s.isType(r)?r:e};function Re(e){if("fields"in e){const t={};for(const[s,r]of Object.entries(e.fields))t[s]=Re(r);return e.setFields(t)}if("array"===e.type){const t=e.optional();return t.innerType&&(t.innerType=Re(t.innerType)),t}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(Re)}):"optional"in e?e.optional():e}let Me=e=>"[object Object]"===Object.prototype.toString.call(e);function Ue(e,t){let s=Object.keys(e.fields);return Object.keys(t).filter(e=>-1===s.indexOf(e))}const Ge=Ce([]);function Pe(e){return new Le(e)}class Le extends ge{constructor(e){super({type:"object",check:e=>Me(e)||"function"==typeof e}),this.fields=Object.create(null),this._sortErrors=Ge,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,t={}){var s;let r=super._cast(e,t);if(void 0===r)return this.getDefault(t);if(!this._typeCheck(r))return r;let a=this.fields,n=null!=(s=t.stripUnknown)?s:this.spec.noUnknown,i=[].concat(this._nodes,Object.keys(r).filter(e=>!this._nodes.includes(e))),o={},l=Object.assign({},t,{parent:o,__validating:t.__validating||!1}),u=!1;for(const c of i){let e=a[c],s=c in r,i=r[c];if(e){let s;l.path=(t.path?`${t.path}.`:"")+c,e=e.resolve({value:i,context:t.context,parent:o});let a=e instanceof ge?e.spec:void 0,n=null==a?void 0:a.strict;if(null!=a&&a.strip){u=u||c in r;continue}s=t.__validating&&n?i:e.cast(i,l),void 0!==s&&(o[c]=s)}else s&&!n&&(o[c]=i);s===c in o&&o[c]===i||(u=!0)}return u?o:r}_validate(e,t={},s,r){let{from:a=[],originalValue:n=e,recursive:i=this.spec.recursive}=t;t.from=[{schema:this,value:n},...a],t.__validating=!0,t.originalValue=n,super._validate(e,t,s,(e,a)=>{if(!i||!Me(a))return void r(e,a);n=n||a;let o=[];for(let s of this._nodes){let e=this.fields[s];e&&!oe.isRef(e)&&o.push(e.asNestedTest({options:t,key:s,parent:a,parentPath:t.path,originalParent:n}))}this.runTests({tests:o,value:a,originalValue:n,options:t},s,t=>{r(t.sort(this._sortErrors).concat(e),a)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),s=t.fields;for(let[r,a]of Object.entries(this.fields)){const e=s[r];s[r]=void 0===e?a:e}return t.withMutation(t=>t.setFields(s,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach(s=>{var r;const a=this.fields[s];let n=e;null!=(r=n)&&r.value&&(n=Object.assign({},n,{parent:n.value,value:n.value[s]})),t[s]=a&&"getDefault"in a?a.getDefault(n):void 0}),t}setFields(e,t){let s=this.clone();return s.fields=e,s._nodes=function(e,t=[]){let s=[],r=new Set,a=new Set(t.map(([e,t])=>`${e}-${t}`));function n(e,t){let n=D.split(e)[0];r.add(n),a.has(`${t}-${n}`)||s.push([t,n])}for(const i of Object.keys(e)){let t=e[i];r.add(i),oe.isRef(t)&&t.isSibling?n(t.path,i):re(t)&&"deps"in t&&t.deps.forEach(e=>n(e,i))}return $.array(Array.from(r),s).reverse()}(e,t),s._sortErrors=Ce(Object.keys(e)),t&&(s._excludedEdges=t),s}shape(e,t=[]){return this.clone().withMutation(s=>{let r=s._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[...s._excludedEdges,...t]),s.setFields(Object.assign(s.fields,e),r)})}partial(){const e={};for(const[t,s]of Object.entries(this.fields))e[t]="optional"in s&&s.optional instanceof Function?s.optional():s;return this.setFields(e)}deepPartial(){return Re(this)}pick(e){const t={};for(const s of e)this.fields[s]&&(t[s]=this.fields[s]);return this.setFields(t,this._excludedEdges.filter(([t,s])=>e.includes(t)&&e.includes(s)))}omit(e){const t=[];for(const s of Object.keys(this.fields))e.includes(s)||t.push(s);return this.pick(t)}from(e,t,s){let r=D.getter(e,!0);return this.transform(a=>{if(!a)return a;let n=a;return((e,t)=>{const s=[...D.normalizePath(t)];if(1===s.length)return s[0]in e;let r=s.pop(),a=D.getter(D.join(s),!0)(e);return!(!a||!(r in a))})(a,e)&&(n=Object.assign({},a),s||delete n[e],n[t]=r(a)),n})}json(){return this.transform($e)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||ee.exact,test(e){if(null==e)return!0;const t=Ue(this.schema,e);return 0===t.length||this.createError({params:{properties:t.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,t=ee.noUnknown){"boolean"!=typeof e&&(t=e,e=!0);let s=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const s=Ue(this.schema,t);return!e||0===s.length||this.createError({params:{unknown:s.join(", ")}})}});return s.spec.noUnknown=e,s}unknown(e=!0,t=ee.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const s={};for(const r of Object.keys(t))s[e(r)]=t[r];return s})}camelCase(){return this.transformKeys(S.camelCase)}snakeCase(){return this.transformKeys(S.snakeCase)}constantCase(){return this.transformKeys(e=>S.snakeCase(e).toUpperCase())}describe(e){const t=(e?this.resolve(e):this).clone(),s=super.describe(e);s.fields={};for(const[a,n]of Object.entries(t.fields)){var r;let t=e;null!=(r=t)&&r.value&&(t=Object.assign({},t,{parent:t.value,value:t.value[a]})),s.fields[a]=n.describe(t)}return s}}function ze(e){return new Ve(e)}Pe.prototype=Le.prototype;class Ve extends ge{constructor(e){super({type:"array",spec:{types:e},check:e=>Array.isArray(e)}),this.innerType=void 0,this.innerType=e}_cast(e,t){const s=super._cast(e,t);if(!this._typeCheck(s)||!this.innerType)return s;let r=!1;const a=s.map((e,a)=>{const n=this.innerType.cast(e,Object.assign({},t,{path:`${t.path||""}[${a}]`,parent:s,originalValue:e,value:e,index:a}));return n!==e&&(r=!0),n});return r?a:s}_validate(e,t={},s,r){var a;let n=this.innerType,i=null!=(a=t.recursive)?a:this.spec.recursive;null!=t.originalValue&&t.originalValue,super._validate(e,t,s,(a,o)=>{var l;if(!i||!n||!this._typeCheck(o))return void r(a,o);let u=new Array(o.length);for(let s=0;s<o.length;s++){var c;u[s]=n.asNestedTest({options:t,index:s,parent:o,parentPath:t.path,originalParent:null!=(c=t.originalValue)?c:e})}this.runTests({value:o,tests:u,originalValue:null!=(l=t.originalValue)?l:e,options:t},s,e=>r(e.concat(a),o))})}clone(e){const t=super.clone(e);return t.innerType=this.innerType,t}json(){return this.transform($e)}concat(e){let t=super.concat(e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}of(e){let t=this.clone();if(!re(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+z(e));return t.innerType=e,t.spec=Object.assign({},t.spec,{types:e}),t}length(e,t=te.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e,t){return t=t||te.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e,t){return t=t||te.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}ensure(){return this.default(()=>[]).transform((e,t)=>this._typeCheck(e)?e:null==t?[]:[].concat(t))}compact(e){let t=e?(t,s,r)=>!e(t,s,r):e=>!!e;return this.transform(e=>null!=e?e.filter(t):e)}describe(e){const t=(e?this.resolve(e):this).clone(),s=super.describe(e);if(t.innerType){var r;let a=e;null!=(r=a)&&r.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[0]})),s.innerType=t.innerType.describe(a)}return s}}ze.prototype=Ve.prototype;const qe=({tarifToEdit:e,closeModal:s,categories:r=[],onSubmit:a,isSubmitting:n=!1})=>{const[i,o]=c.useState("GROUPAGE_DHD_AERIEN"),[l,u]=c.useState({category_id:"",tarif_minimum:"",type_expedition:"GROUPAGE_DHD_AERIEN",prix_unitaire:"",pays:"",ville_depart:"",ville_arrivee:"",prix_modes:[{mode:"avion",montant_base:"",pourcentage_prestation:"",montant_expedition:0}]}),[d,p]=c.useState({});c.useEffect(()=>{if(e){const t=e.type_expedition?e.type_expedition.toUpperCase():"GROUPAGE_DHD_AERIEN";o(t);let s=[];"GROUPAGE_DHD_AERIEN"===t?s=[{mode:"avion",montant_base:"",pourcentage_prestation:"",montant_expedition:0}]:"GROUPAGE_DHD_MARITIME"===t?s=[{mode:"bateau",montant_base:"",pourcentage_prestation:"",montant_expedition:0}]:"GROUPAGE_CA"===t?s=[{mode:"colis",montant_base:"",pourcentage_prestation:"",montant_expedition:0}]:"GROUPAGE_AFRIQUE"===t?s=[{mode:"afrique",montant_base:"",pourcentage_prestation:"",montant_expedition:0}]:"GROUPAGE_DHD"===t&&(s=[{mode:"avion",montant_base:"",pourcentage_prestation:"",montant_expedition:0},{mode:"bateau",montant_base:"",pourcentage_prestation:"",montant_expedition:0}]);const r=s.map(s=>{const r=e.prix_modes?.find(e=>e.mode===s.mode);return r?{...s,montant_base:r.montant_base,pourcentage_prestation:r.pourcentage_prestation,montant_expedition:r.montant_expedition}:"GROUPAGE_DHD_AERIEN"!==t&&"GROUPAGE_DHD_MARITIME"!==t||e.mode!==s.mode?s:{...s,montant_base:e.montant_base,pourcentage_prestation:e.pourcentage_prestation,montant_expedition:e.montant_base*(1+e.pourcentage_prestation/100)}});let a="",n="";e.ligne&&e.ligne.includes("-")&&([a,n]=e.ligne.split("-")),u({category_id:e.category_id||"",tarif_minimum:e.tarif_minimum||"",type_expedition:t,prix_unitaire:e.prix_unitaire||"",pays:e.pays||"",ville_depart:a,ville_arrivee:n,prix_modes:r})}},[e]),c.useEffect(()=>{const e=l.prix_modes.map(e=>{const t=parseFloat(e.montant_base)||0,s=t+t*(parseFloat(e.pourcentage_prestation)||0)/100;return{...e,montant_expedition:s}});JSON.stringify(l.prix_modes)!==JSON.stringify(e)&&u(t=>({...t,prix_modes:e}))},[l.prix_modes,i]);const m=(e,t)=>{u(s=>{const a={...s,[e]:t};if("category_id"===e){const e=r.find(e=>e.id.toString()===t.toString());e&&e.prix_kg&&(a.tarif_minimum=e.prix_kg)}return a}),d[e]&&p(t=>({...t,[e]:""}))},f=(e,t,s)=>{const r=[...l.prix_modes];r[e]={...r[e],[t]:s},u(e=>({...e,prix_modes:r}));const a=`mode_${e}_${"pourcentage_prestation"===t?"pourcentage":"base"}`;d[a]&&p(e=>({...e,[a]:""}))},x=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(e||0);return t.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[95vh] overflow-y-auto",children:[t.jsx("div",{className:"sticky top-0 z-10 p-3 border-b bg-white rounded-t-xl border-gray-100",children:t.jsxs("div",{className:"flex justify-between items-center text-surface-900",children:[t.jsx("h2",{className:"text-2xl font-black tracking-tight",children:e?"Modifier le tarif":"Nouveau tarif groupÃ©e"}),t.jsx("button",{onClick:s,className:"text-surface-400 hover:text-red-500 transition-all p-2 rounded-xl hover:bg-red-50",children:t.jsx(h,{className:"h-6 w-6"})})]})}),t.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Type d'expÃ©dition ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:i,onChange:e=>{const t=e.target.value;o(t);let s=[];"GROUPAGE_DHD_AERIEN"===t?s=[{mode:"avion",montant_base:"",pourcentage_prestation:"",montant_expedition:0}]:"GROUPAGE_DHD_MARITIME"===t?s=[{mode:"bateau",montant_base:"",pourcentage_prestation:"",montant_expedition:0}]:"GROUPAGE_CA"===t?s=[{mode:"colis",montant_base:"",pourcentage_prestation:"",montant_expedition:0}]:"GROUPAGE_AFRIQUE"===t&&(s=[{mode:"afrique",montant_base:"",pourcentage_prestation:"",montant_expedition:0}]),u(e=>({...e,type_expedition:t,prix_unitaire:"",pays:"",ville_depart:"",ville_arrivee:"",prix_modes:s})),p({})},className:"w-full px-4 py-2 border rounded-xl shadow-inner focus:ring-blue-500 focus:border-blue-500 bg-gray-50 transition duration-150 border-gray-300",children:[t.jsx("option",{value:"GROUPAGE_DHD_AERIEN",children:"Groupage DHD AÃ©rien"}),t.jsx("option",{value:"GROUPAGE_DHD_MARITIME",children:"Groupage DHD Maritime"}),t.jsx("option",{value:"GROUPAGE_CA",children:"Groupage CA"}),t.jsx("option",{value:"GROUPAGE_AFRIQUE",children:"Groupage Afrique"})]})]}),("GROUPAGE_DHD_AERIEN"===i||"GROUPAGE_DHD_MARITIME"===i)&&t.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[t.jsx("h3",{className:"text-lg font-extrabold text-blue-700 mb-4 font-display",children:"ItinÃ©raire & CatÃ©gorie"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["CatÃ©gorie ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:l.category_id,onChange:e=>m("category_id",e.target.value),className:"w-full px-4 py-2 border rounded-xl shadow-inner focus:ring-blue-500 focus:border-blue-500 bg-gray-50 transition duration-150 "+(d.category_id?"border-red-500":"border-gray-300"),children:[t.jsx("option",{value:"",children:"SÃ©lectionner une catÃ©gorie"}),r.map(e=>t.jsx("option",{value:e.id,children:e.nom},e.id))]}),d.category_id&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.category_id})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Ville de dÃ©part ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:l.ville_depart,onChange:e=>m("ville_depart",e.target.value),className:"w-full px-4 py-2 border rounded-xl shadow-inner focus:ring-blue-500 focus:border-blue-500 bg-gray-50 transition duration-150 "+(d.ville_depart?"border-red-500":"border-gray-300"),placeholder:"ex: Abidjan"}),d.ville_depart&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.ville_depart})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Ville d'arrivÃ©e ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:l.ville_arrivee,onChange:e=>m("ville_arrivee",e.target.value),className:"w-full px-4 py-2 border rounded-xl shadow-inner focus:ring-blue-500 focus:border-blue-500 bg-gray-50 transition duration-150 "+(d.ville_arrivee?"border-red-500":"border-gray-300"),placeholder:"ex: Paris"}),d.ville_arrivee&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.ville_arrivee})]})]}),t.jsx("div",{className:"space-y-6",children:l.prix_modes.map((e,s)=>t.jsxs("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-white to-gray-50 border border-gray-200 shadow-md relative overflow-hidden group",children:[t.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:"avion"===e.mode?"âœˆï¸":"ðŸš¢"}),t.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-6 flex items-center gap-2",children:[t.jsx("span",{className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg text-sm",children:"Tarification"}),"Mode ","avion"===e.mode?"AÃ©rien":"Maritime"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:["Montant base (FCFA) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",value:e.montant_base,onChange:e=>f(s,"montant_base",e.target.value),className:"w-full px-4 py-3 border rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all "+(d[`mode_${s}_base`]?"border-red-500 bg-red-50":"border-gray-200 bg-white"),placeholder:"900"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:["% Prestation ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",value:e.pourcentage_prestation,onChange:e=>f(s,"pourcentage_prestation",e.target.value),className:"w-full px-4 py-3 border rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all pr-10 "+(d[`mode_${s}_pourcentage`]?"border-red-500 bg-red-50":"border-gray-200 bg-white"),placeholder:"8"}),t.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 font-bold",children:"%"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-600 mb-2",children:"Total ExpÃ©dition"}),t.jsx("div",{className:"px-4 py-3 bg-blue-600 text-white rounded-xl font-black text-lg shadow-inner flex items-center justify-center",children:x(e.montant_expedition)})]})]})]},e.mode||s))})]}),"GROUPAGE_AFRIQUE"===i&&t.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[t.jsx("h3",{className:"text-lg font-extrabold text-blue-700 mb-4",children:"ParamÃ¨tres Groupage Afrique"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-6",children:t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Pays et capitale ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:l.pays,onChange:e=>m("pays",e.target.value),className:"w-full px-4 py-2 border rounded-xl shadow-inner focus:ring-blue-500 focus:border-blue-500 bg-gray-50 transition duration-150 "+(d.pays?"border-red-500":"border-gray-300"),children:[t.jsx("option",{value:"",children:"SÃ©lectionner un pays"}),["AFRIQUE DU SUD PRETORIA","ALGERIE ALGER","ANGOLA LUANDA","BENIN COTONOU","BOTSWANA GABORONE","BURKINA FASO OUAGADOUGOU","BURUNDI GITEGA","CAMEROUN YAOUNDE","CAP-VERT PRAIA","COMORES MORONI","COTE D'IVOIRE YAMOUSSOUKRO","DJIBOUTI DJIBOUTI","EGYPTE LE CAIRE","ERYTHREE ASMARA","ESWATINI MBABANE","ETHIOPIE ADDIS-ABEBA","GABON LIBREVILLE","GAMBIE BANJUL","GHANA ACCRA","GUINEE CONAKRY","GUINEE-BISSAU BISSAU","GUINEE EQUATORIALE MALABO","KENYA NAIROBI","LESOTHO MASERU","LIBERIA MONROVIA","LIBYE TRIPOLI","MADAGASCAR ANTANANARIVO","MALAWI LILONGWE","MALI BAMAKO","MAROC RABAT","MAURICE PORT-LOUIS","MAURITANIE NOUAKCHOTT","MOZAMBIQUE MAPUTO","NAMIBIE WINDHOEK","NIGER NIAMEY","NIGERIA ABUJA","OUGANDA KAMPALA","RD CONGO KINSHASA","REPUBLIQUE DU CONGO BRAZZAVILLE","RWANDA KIGALI","SAO TOME-ET-PRINCIPE SAO TOME","SENEGAL DAKAR","SEYCHELLES VICTORIA","SIERRA LEONE FREETOWN","SOMALIE MOGADISCIO","SOUDAN KHARTOUM","SOUDAN DU SUD Djouba","TANZANIE DODOMA","TCHAD N'DJAMENA","TOGO LOME","TUNISIE TUNIS","ZAMBIE LUSAKA","ZIMBABWE HARARE"].map(e=>t.jsx("option",{value:e,children:e},e))]})]})}),t.jsxs("div",{className:"p-6 rounded-xl bg-white border border-gray-200 shadow-md",children:[t.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-4 capitalize italic",children:"ðŸŒ Mode: Afrique"}),l.prix_modes.map((e,s)=>t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant base (FCFA) *"}),t.jsx("input",{type:"number",value:e.montant_base,onChange:e=>f(s,"montant_base",e.target.value),className:"w-full px-3 py-2 border rounded-lg bg-white border-gray-300"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"% Prestation *"}),t.jsx("input",{type:"number",value:e.pourcentage_prestation,onChange:e=>f(s,"pourcentage_prestation",e.target.value),className:"w-full px-3 py-2 border rounded-lg bg-white border-gray-300"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant expÃ©dition"}),t.jsx("input",{type:"text",value:x(e.montant_expedition),readOnly:!0,className:"w-full px-3 py-2 border rounded-lg bg-blue-50 text-blue-800 font-semibold"})]})]},s))]})]}),"GROUPAGE_CA"===i&&t.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[t.jsx("h3",{className:"text-xl font-extrabold text-blue-700 mb-6",children:"ParamÃ¨tres d'expÃ©dition CA"}),t.jsx("div",{className:"space-y-8",children:l.prix_modes.map((e,s)=>t.jsxs("div",{className:"p-6 rounded-xl bg-white border border-gray-200 shadow-md",children:[t.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4 capitalize border-b pb-2",children:["ðŸ“¦ Mode: ",e.mode]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant base (FCFA) *"}),t.jsx("input",{type:"number",value:e.montant_base,onChange:e=>f(s,"montant_base",e.target.value),className:"w-full px-3 py-2 border rounded-lg bg-white border-gray-300"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"% Prestation *"}),t.jsx("input",{type:"number",value:e.pourcentage_prestation,onChange:e=>f(s,"pourcentage_prestation",e.target.value),className:"w-full px-3 py-2 border rounded-lg bg-white border-gray-300"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant expÃ©dition"}),t.jsx("input",{type:"text",value:x(e.montant_expedition),readOnly:!0,className:"w-full px-3 py-2 border rounded-lg bg-blue-50 text-blue-800 font-semibold"})]})]})]},e.mode||s))})]}),t.jsxs("div",{className:"sticky bottom-0 bg-white/95 backdrop-blur-sm pt-4 pb-2 px-6 border-t border-gray-100 -mx-8 -mb-8 rounded-b-xl flex justify-end space-x-4",children:[t.jsx("button",{onClick:s,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-100 transition duration-150 font-medium",disabled:n,children:"Annuler"}),t.jsx("button",{onClick:e=>{if(e.preventDefault(),!(()=>{const e={};return"GROUPAGE_DHD_AERIEN"!==i&&"GROUPAGE_DHD_MARITIME"!==i||(l.category_id||(e.category_id="CatÃ©gorie requise"),l.ville_depart||(e.ville_depart="Ville de dÃ©part requise"),l.ville_arrivee||(e.ville_arrivee="Ville d'arrivÃ©e requise")),"GROUPAGE_AFRIQUE"===i&&(l.pays||(e.pays="Pays requis")),l.prix_modes.forEach((t,s)=>{t.montant_base||(e[`mode_${s}_base`]="Montant base requis"),""!==t.pourcentage_prestation&&null!==t.pourcentage_prestation||(e[`mode_${s}_pourcentage`]="Pourcentage requis")}),p(e),0===Object.keys(e).length})())return;let t;if("GROUPAGE_DHD_AERIEN"===i||"GROUPAGE_DHD_MARITIME"===i){const e=l.prix_modes[0];t={type_expedition:i.toLowerCase(),category_id:l.category_id,mode:e.mode,ligne:`${l.ville_depart}-${l.ville_arrivee}`,montant_base:parseFloat(e.montant_base),pourcentage_prestation:parseFloat(e.pourcentage_prestation)}}else if("GROUPAGE_AFRIQUE"===i){const e=l.prix_modes[0];t={type_expedition:i.toLowerCase(),pays:l.pays,mode:"afrique",montant_base:parseFloat(e.montant_base),pourcentage_prestation:parseFloat(e.pourcentage_prestation)}}else if("GROUPAGE_CA"===i){const e=l.prix_modes[0];t={type_expedition:i.toLowerCase(),mode:"colis",montant_base:parseFloat(e.montant_base),pourcentage_prestation:parseFloat(e.pourcentage_prestation)}}else t={category_id:l.category_id,tarif_minimum:parseFloat(l.tarif_minimum),type_expedition:i.toLowerCase(),pays:l.pays,prix_modes:l.prix_modes.map(e=>({mode:e.mode,montant_base:parseFloat(e.montant_base),pourcentage_prestation:parseFloat(e.pourcentage_prestation),montant_expedition:parseFloat(e.montant_expedition)}))};a(t)},className:"px-6 py-2 rounded-lg shadow-lg text-white font-semibold bg-green-600 hover:bg-green-700 transition duration-150 disabled:bg-gray-400 disabled:shadow-none",disabled:n,children:n?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),t.jsx("span",{children:e?"Mise Ã  jour...":"Enregistrement..."})]}):t.jsx("span",{children:e?"Mettre Ã  jour":"Enregistrer"})})]})]})]})})};Pe().shape({id:Oe().optional(),category_id:Oe().required("La catÃ©gorie est requise"),tarif_minimum:Te().required("Le tarif minimum est requis").positive("Le tarif doit Ãªtre positif"),prix_modes:ze().of(Pe().shape({mode:Oe().required("Le mode est requis"),montant_base:Te().required("Le montant de base est requis").positive("Le montant doit Ãªtre positif"),montant_expedition:Te().required("Le montant d'expÃ©dition est requis").positive("Le montant doit Ãªtre positif"),pourcentage_prestation:Te().required("Le pourcentage est requis").min(0,"Le pourcentage doit Ãªtre positif ou zÃ©ro")}))});const He=()=>{const[e,p]=c.useState(!1),[O,k]=c.useState(null),[T,F]=c.useState(!1),[D,I]=c.useState(""),[S,C]=c.useState("all"),[$,R]=c.useState("table"),M=s(),{groupedTarifs:U,isLoading:G,error:P}=r(e=>e.tarification),{categories:L}=r(e=>e.produits),z=(U||[]).filter(e=>{const t=(e.category?.nom||"").toLowerCase().includes(D.toLowerCase())||(e.pays||"").toLowerCase().includes(D.toLowerCase()),s="all"===S||e.type_expedition?.toUpperCase()===S.toUpperCase();return t&&s}),V=z.reduce((e,t)=>{const s=t.type_expedition||"non_defini";return e[s]||(e[s]=[]),e[s].push(t),e},{});c.useEffect(()=>{L&&0!==L.length||M(a()),U&&0!==U.length||M(n())},[]);const q=(e=null)=>{k(e||null),F(!0)},H=()=>{F(!1),k(null)},B=async(e,t)=>{try{await i.updateGroupedTarifStatus(e),o.success(`Statut du tarif mis Ã  jour Ã  ${t?"Inactif":"Actif"}!`),M(n())}catch(s){console.error("Erreur lors de la mise Ã  jour du statut:",s),o.error("Erreur lors de la mise Ã  jour du statut.")}},Z=e=>{switch(e.toUpperCase()){case"GROUPAGE_DHD":case"GROUPAGE_DHD_AERIEN":return t.jsx(j,{className:"h-4 w-4"});case"GROUPAGE_DHD_MARITIME":default:return t.jsx(w,{className:"h-4 w-4"});case"GROUPAGE_AFRIQUE":return t.jsx(x,{className:"h-4 w-4"});case"GROUPAGE_CA":return t.jsx(g,{className:"h-4 w-4"})}},K=e=>{switch(e.toLowerCase()){case"avion":return t.jsx(j,{className:"h-3 w-3"});case"bateau":return t.jsx(w,{className:"h-3 w-3"});default:return t.jsx(g,{className:"h-3 w-3"})}},Y=e=>{if(null==e)return"0 FCFA";const t="string"==typeof e?parseFloat(e):e;return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0,maximumFractionDigits:0}).format(t).replace("XOF","FCFA")};return G&&0===(U||[]).length?t.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-primary-500"}),t.jsx("p",{className:"text-surface-500 font-medium animate-pulse",children:"Chargement des tarifs..."})]}):P&&0===(U||[]).length?t.jsxs("div",{className:"bg-red-50 border border-red-100 p-6 rounded-2xl flex items-center gap-4 animate-shake",children:[t.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center text-red-600",children:t.jsx(h,{className:"h-6 w-6"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-red-900",children:"Erreur de chargement"}),t.jsx("p",{className:"text-red-700 text-sm",children:P}),t.jsx("button",{onClick:()=>M(n()),className:"mt-2 text-red-600 font-bold text-xs uppercase hover:underline",children:"RÃ©essayer"})]})]}):t.jsxs("div",{className:"animate-fade-in space-y-6 pb-20 md:pb-8",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[t.jsxs("div",{className:"max-w-2xl",children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:"Tarifs de Groupage"}),t.jsx("p",{className:"text-slate-500 text-sm mt-1 leading-relaxed",children:"Configurez les grilles tarifaires pour les expÃ©ditions groupÃ©es. Ces tarifs sont appliquÃ©s en fonction de la catÃ©gorie de marchandise et de la ligne logistique choisie."})]}),t.jsxs("button",{onClick:()=>q(),className:"inline-flex items-center justify-center px-4 py-2 bg-slate-900 text-white text-sm font-bold rounded-lg hover:bg-slate-800 transition-all shadow-sm shrink-0",children:[t.jsx(m,{className:"h-4 w-4 mr-2"}),t.jsx("span",{children:"Nouveau Tarif"})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-center bg-white p-3 rounded-xl border border-slate-200 shadow-sm",children:[t.jsxs("div",{className:"relative flex-1 w-full",children:[t.jsx(f,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),t.jsx("input",{type:"text",placeholder:"Rechercher par catÃ©gorie, pays ou ligne...",value:D,onChange:e=>I(e.target.value),className:"w-full pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-1 focus:ring-slate-900 focus:border-slate-900 outline-none transition-all"})]}),t.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[t.jsxs("select",{value:S,onChange:e=>C(e.target.value),className:"flex-1 md:flex-none py-2 px-3 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-1 focus:ring-slate-900 outline-none transition-all font-medium text-slate-700",children:[t.jsx("option",{value:"all",children:"Toutes les catÃ©gories"}),t.jsx("option",{value:"GROUPAGE_DHD_AERIEN",children:"DHD AÃ©rien"}),t.jsx("option",{value:"GROUPAGE_DHD_MARITIME",children:"DHD Maritime"}),t.jsx("option",{value:"GROUPAGE_CA",children:"Colis AccompagnÃ©"}),t.jsx("option",{value:"GROUPAGE_AFRIQUE",children:"Afrique"})]}),t.jsxs("div",{className:"hidden md:flex items-center border border-slate-200 rounded-lg overflow-hidden",children:[t.jsx("button",{onClick:()=>R("table"),className:"p-2 transition-colors "+("table"===$?"bg-slate-100 text-slate-900":"bg-white text-slate-400 hover:text-slate-600"),title:"Vue Table",children:t.jsx(v,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>R("grid"),className:"p-2 transition-colors "+("grid"===$?"bg-slate-100 text-slate-900":"bg-white text-slate-400 hover:text-slate-600"),title:"Vue Grille",children:t.jsx(y,{className:"h-4 w-4"})})]})]})]}),t.jsx("div",{className:`hidden ${"table"===$?"md:block":""} bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden`,children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-slate-100",children:[t.jsx("thead",{className:"bg-slate-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Marchandise / CatÃ©gorie"}),t.jsx("th",{className:"px-6 py-3 text-left text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Destination / Ligne"}),t.jsx("th",{className:"px-6 py-3 text-left text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Base Min."}),t.jsx("th",{className:"px-6 py-3 text-left text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Modes Actifs"}),t.jsx("th",{className:"px-6 py-3 text-center text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Statut"}),t.jsx("th",{className:"px-6 py-3 text-right text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Actions"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-50",children:Object.entries(V).map(([e,s],r)=>t.jsxs(d.Fragment,{children:[t.jsx("tr",{className:"bg-slate-50/50",children:t.jsx("td",{colSpan:"6",className:"px-6 py-2",children:t.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[Z(e),t.jsx("span",{className:"font-bold text-[10px] uppercase tracking-widest",children:e.replace(/_/g," ")})]})})}),s.map(e=>t.jsxs("tr",{className:"group hover:bg-slate-50 transition-colors duration-150",children:[t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"text-sm font-semibold text-slate-900",children:e.category?.nom||("groupage_ca"===e.type_expedition?"Colis AccompagnÃ©":"Tarif GÃ©nÃ©ral")}),t.jsxs("div",{className:"text-[10px] text-slate-400 font-medium uppercase mt-0.5",children:["ID: ",e.id.substring(0,8)]})]}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-center gap-1.5 text-sm text-slate-600 font-medium",children:e.type_expedition?.includes("dhd")?t.jsx("span",{className:"font-bold text-slate-900",children:e.ligne||"Ligne"}):t.jsx("span",{className:"truncate max-w-[200px]",children:e.pays||"Toutes destinations"})})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"text-sm font-bold text-slate-900 underline underline-offset-4 decoration-slate-200",children:Y(e.tarif_minimum||e.montant_base||e.prix_unitaire)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-center gap-2",children:e.prix_modes?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex -space-x-1",children:e.prix_modes.map((e,s)=>t.jsx("div",{className:"p-1 bg-white border border-slate-200 rounded text-slate-500",title:e.mode,children:K(e.mode)},s))}),t.jsxs("span",{className:"text-xs font-medium text-slate-500",children:[e.prix_modes.length," mode",e.prix_modes.length>1?"s":""]})]}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"p-1 bg-white border border-slate-200 rounded text-slate-500",children:K(e.mode||"")}),t.jsx("span",{className:"text-xs font-medium text-slate-500 uppercase",children:e.mode})]})})}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsxs("button",{onClick:()=>B(e.id,e.actif),className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold transition-all\n                            "+(e.actif?"bg-green-50 text-green-700 border border-green-100":"bg-slate-100 text-slate-500 border border-slate-200"),children:[t.jsx("div",{className:"w-1.5 h-1.5 rounded-full mr-1.5 "+(e.actif?"bg-green-500":"bg-slate-400")}),e.actif?"ACTIF":"INACTIF"]})}),t.jsx("td",{className:"px-6 py-4 text-right",children:t.jsxs("div",{className:"flex justify-end items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsx("button",{onClick:()=>q(e),className:"p-1.5 text-slate-500 hover:text-slate-900 hover:bg-white border border-transparent hover:border-slate-200 rounded-md transition-all",title:"Modifier",children:t.jsx(_,{className:"h-4 w-4"})}),t.jsxs("div",{className:"relative group/menu",children:[t.jsx("button",{className:"p-1.5 text-slate-400 hover:text-slate-900 rounded-md",children:t.jsx(b,{className:"h-4 w-4"})}),t.jsxs("div",{className:"absolute right-0 top-full mt-1 hidden group-hover/menu:block bg-white border border-slate-200 rounded-lg shadow-xl z-10 w-40 overflow-hidden",children:[t.jsxs("button",{onClick:()=>B(e.id,e.actif),className:"w-full text-left px-4 py-2 text-xs font-medium text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[e.actif?t.jsx(A,{size:14}):t.jsx(E,{size:14}),e.actif?"DÃ©sactiver":"Activer"]}),t.jsxs("button",{onClick:()=>(async e=>{if(window.confirm("ÃŠtes-vous sÃ»r de vouloir supprimer dÃ©finitivement ce tarif ? Cette action est irrÃ©versible."))try{await i.deleteGroupedTarif(e),o.success("Tarif supprimÃ© avec succÃ¨s!"),M(n())}catch(t){console.error("Erreur lors de la suppression du tarif:",t),o.error("Erreur lors de la suppression du tarif.")}})(e.id),className:"w-full text-left px-4 py-2 text-xs font-medium text-red-600 hover:bg-red-50 flex items-center gap-2 border-t border-slate-100",children:[t.jsx(N,{size:14}),"Supprimer"]})]})]})]})})]},e.id))]},`${e}-${r}`))})]})})}),t.jsx("div",{className:"grid gap-4 "+("grid"===$?"md:grid-cols-2 lg:grid-cols-3":"md:hidden"),children:z.map(e=>t.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 space-y-4 hover:border-slate-300 transition-all shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-slate-900 text-sm",children:e.category?.nom||("groupage_ca"===e.type_expedition?"Colis AccompagnÃ©":"Tarif GÃ©nÃ©ral")}),t.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-slate-500 font-medium lowercase",children:[t.jsx(x,{className:"h-3 w-3"}),e.type_expedition?.includes("dhd")?e.ligne:e.pays||"tous pays"]})]}),t.jsx("div",{className:"w-2 h-2 rounded-full "+(e.actif?"bg-green-500":"bg-slate-300")})]}),t.jsxs("div",{className:"flex items-baseline justify-between py-2 border-y border-slate-50",children:[t.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-tight",children:"Tarif Min."}),t.jsx("span",{className:"text-base font-bold text-slate-900",children:Y(e.tarif_minimum||e.montant_base||e.prix_unitaire)})]}),t.jsxs("div",{className:"flex items-center justify-between gap-2 pt-1",children:[t.jsx("div",{className:"text-[10px] font-medium text-slate-400",children:e.prix_modes?`${e.prix_modes.length} modes actifs`:"1 mode"}),t.jsxs("button",{onClick:()=>q(e),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-50 hover:bg-slate-100 text-slate-700 border border-slate-200 rounded-lg text-xs font-bold transition-all",children:[t.jsx(_,{className:"h-3 w-3"}),"Modifier"]})]})]},e.id))}),0===z.length&&!G&&t.jsxs("div",{className:"flex flex-col items-center justify-center py-16 bg-white rounded-xl border border-dashed border-slate-200",children:[t.jsx(f,{className:"h-8 w-8 text-slate-200 mb-4"}),t.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:"Aucun rÃ©sultat"}),t.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Ajustez vos filtres ou effectuez une nouvelle recherche."})]}),T&&t.jsx(qe,{tarifToEdit:O,closeModal:H,categories:L,onSubmit:async e=>{try{p(!0),console.log("DonnÃ©es reÃ§ues du formulaire:",e);let t=e;console.log("DonnÃ©es formatÃ©es prÃªtes Ã  l'envoi:",t);const s=o.loading(O?"Modification en cours...":"Enregistrement en cours...");if(O){console.log(`Tentative de modification du tarif ${O.id}`);const e=await M(l({tarifId:O.id,tarifData:t}));l.fulfilled.match(e)?(o.success("Tarif mis Ã  jour avec succÃ¨s!",{id:s}),M(n()),H()):(console.error("Erreur dispatch editGroupedTarif:",e.error),o.error("Erreur lors de la modification",{id:s}))}else{console.log("Tentative d'ajout d'un nouveau tarif");const e=await M(u(t));u.fulfilled.match(e)?(o.success("Nouveau tarif ajoutÃ© avec succÃ¨s!",{id:s}),M(n()),H()):(console.error("Erreur dispatch addGroupedTarif:",e.error),o.error("Erreur lors de l'ajout",{id:s}))}}catch(t){console.error("Erreur lors de la soumission du tarif:",t),o.error(`Erreur: ${t.message||"Une erreur est survenue."}`),setError("Erreur lors de la soumission du tarif")}finally{p(!1)}},isSubmitting:e})]})};export{He as default};
