import{u as e,a as s,F as r,v as t,j as a,L as i,G as l,H as n,I as d,J as c,K as o,M as x,N as m}from"./index-BzHVKazg.js";import{r as u}from"./router-BcYogCAZ.js";import{N as g,T as p}from"./notification-Bf4IVRwP.js";import{C as h}from"./circle-plus-PKmViBFI.js";import{X as b}from"./x-sDzYkWd9.js";import{S as f}from"./save-87gxxQbU.js";import{P as j}from"./pen-pg3U8McX.js";import{T as y}from"./trash-2-c8cfoBNg.js";import"./vendor-DOHx2j1n.js";function N(){const N=e(),{listProduits:v,isLoading:w,categories:k}=s(e=>e.produits);console.log(v,"listProduits");const[_,C]=u.useState(null),[z,A]=u.useState(null),[E,S]=u.useState({category_id:"",designation:"",reference:""}),[P,D]=u.useState(!1),[I,F]=u.useState(!1),[L,M]=u.useState(null),[R,V]=u.useState(null),[T,$]=u.useState({nom:"",prix_kg_paris:"",prix_kg_autres:""}),[G,q]=u.useState(!1),[U,W]=u.useState(null),B=u.useRef(null);u.useEffect(()=>{0===v.length&&N(r()),0===k.length&&N(t())},[N]);const H=u.useCallback((e,s)=>{B.current&&clearTimeout(B.current),W({type:e,message:s}),B.current=setTimeout(()=>{W(null)},4e3)},[]);return w&&0===v.length&&0===k.length?a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[a.jsx(i,{className:"animate-spin text-blue-600",size:40}),a.jsx("p",{className:"text-gray-500 font-medium text-lg",children:"Chargement de vos produits..."})]}):a.jsxs("div",{children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl shadow-sm border border-gray-100 p-4 sm:p-6 mb-6 sm:mb-8 sm:mr-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:"Gestion des produits"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Gérez vos produits et catégories en toute simplicité"})]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-5 py-2.5 rounded-lg hover:bg-blue-700 hover:shadow-md active:scale-95 transition-all duration-200 font-medium",children:[a.jsx(h,{size:20,strokeWidth:2.5}),a.jsx("span",{children:"Ajouter un produit"})]}),a.jsxs("button",{onClick:()=>F(!0),className:"flex items-center gap-2 bg-white text-indigo-600 px-5 py-2.5 rounded-lg border-2 border-indigo-600 hover:bg-indigo-600 hover:text-white hover:shadow-md active:scale-95 transition-all duration-200 font-medium",children:[a.jsx(h,{size:20,strokeWidth:2.5}),a.jsx("span",{children:"Catégories"})]})]})]})}),a.jsx("div",{className:"relative z-50",children:a.jsx(g,{notification:U,onClose:()=>W(null)})}),I&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-2 sm:p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-xl shadow-lg p-3 sm:p-5 relative max-h-[95vh] overflow-y-auto",children:[a.jsx("button",{onClick:()=>F(!1),className:"absolute top-3 right-3 text-gray-500 hover:text-red-500 transition",children:a.jsx(b,{size:22})}),a.jsx("h2",{className:"text-lg font-semibold mb-3 text-gray-800",children:"Gestion des catégories"}),a.jsxs("div",{className:"mb-4 border p-3 rounded-lg bg-gray-50",children:[a.jsx("h3",{className:"font-medium text-gray-700 mb-3",children:L?"Modifier la catégorie":"Ajouter une catégorie"}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx("input",{type:"text",placeholder:"Nom de la catégorie (ex: Denrée alimentaire)",value:T.nom||"",onChange:e=>$({...T,nom:e.target.value}),disabled:!!L||G,className:"border p-2 rounded w-full "+(L?"bg-gray-100 cursor-not-allowed":"")}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Prix ligne Paris (Fcfa/kg)"}),a.jsx("input",{type:"number",placeholder:"Prix Paris",value:T.prix_kg_paris||"",onChange:e=>$({...T,prix_kg_paris:e.target.value}),disabled:G,className:"border p-2 rounded w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Prix autres lignes (Fcfa/kg)"}),a.jsx("input",{type:"number",placeholder:"Prix Autres",value:T.prix_kg_autres||"",onChange:e=>$({...T,prix_kg_autres:e.target.value}),disabled:G,className:"border p-2 rounded w-full"})]})]})]}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsxs("button",{onClick:async()=>{if(!T.nom||!T.prix_kg_paris||!T.prix_kg_autres)return H("error","Veuillez remplir tous les champs !");const e={nom:T.nom,prix_kg:[{ligne:"paris",prix:Number(T.prix_kg_paris)},{ligne:"autres",prix:Number(T.prix_kg_autres)}]};q(!0);try{L?(await N(c({categoryId:L.id,categoryData:{prix_kg:e.prix_kg}})).unwrap(),H("success","Catégorie modifiée avec succès !")):(await N(o(e)).unwrap(),H("success","Catégorie ajoutée avec succès !")),$({nom:"",prix_kg_paris:"",prix_kg_autres:""}),M(null),N(t())}catch(s){H("error",L?"Erreur lors de la modification !":"Erreur lors de l'ajout !")}finally{q(!1)}},disabled:G,className:`mt-1 ${L?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700"} text-white px-4 py-1.5 rounded flex-1 flex items-center gap-2 justify-center transition-all disabled:opacity-50`,children:[G?a.jsx(i,{className:"animate-spin",size:18}):L?a.jsx(f,{size:18}):a.jsx(h,{size:18}),L?"Mettre à jour":"Ajouter la catégorie"]}),L&&a.jsx("button",{onClick:()=>{M(null),$({nom:"",prix_kg_paris:"",prix_kg_autres:""})},className:"mt-1 bg-gray-200 text-gray-700 px-4 py-1.5 rounded hover:bg-gray-300",children:"Annuler"})]})]}),a.jsx("h3",{className:"font-medium text-gray-700 mb-3",children:"Liste des catégories"}),a.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-xl overflow-x-auto",children:0===k.length?a.jsx("p",{className:"p-4 text-gray-500",children:"Aucune catégorie trouvée"}):a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2",children:"Nom"}),a.jsx("th",{className:"p-2",children:"Prix Paris"}),a.jsx("th",{className:"p-2",children:"Prix Autres"}),a.jsx("th",{className:"p-2",children:"Actions"})]})}),a.jsx("tbody",{children:k.map(e=>{const s=Array.isArray(e.prix_kg)?e.prix_kg.find(e=>"paris"===e.ligne)?.prix:e.prix_kg,r=Array.isArray(e.prix_kg)?e.prix_kg.find(e=>"autres"===e.ligne)?.prix:"-";return a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"p-2 font-medium",children:e.nom}),a.jsxs("td",{className:"p-2",children:[s," Fcfa"]}),a.jsxs("td",{className:"p-2",children:[r," ","-"!==r&&"Fcfa"]}),a.jsx("td",{className:"p-2",children:a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx("button",{onClick:()=>{M(e),$({nom:e.nom,prix_kg_paris:s||"",prix_kg_autres:"-"!==r?r:""})},className:"p-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Modifier les prix",children:a.jsx(j,{size:16})}),a.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette catégorie ? Cela pourrait impacter les produits associés.")){q(!0);try{(await N(x(e)).unwrap()).success?(H("success","Catégorie supprimée avec succès !"),N(t())):H("error","Erreur lors de la suppression !")}catch(s){H("error",s.message||"Erreur lors de la suppression !")}finally{q(!1)}}})(e.id),disabled:G,className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors disabled:opacity-50",title:"Supprimer la catégorie",children:a.jsx(y,{size:16})}),a.jsx("button",{onClick:()=>(async e=>{q(!0);try{const s=e.actif?0:1;await N(m({categoryId:e.id,status:s})).unwrap(),H("success",`Catégorie ${e.actif?"désactivée":"activée"} !`)}catch(s){H("error","Erreur lors du changement de statut")}finally{q(!1)}})(e),disabled:G,className:"font-semibold px-2 py-0.5 rounded-full text-[10px] transition-all "+(e.actif?"bg-green-50 text-green-600 hover:bg-green-100":"bg-red-50 text-red-500 hover:bg-red-100"),title:e.actif?"Désactiver":"Activer",children:e.actif?"Actif":"Inactif"})]})})]},e.id)})})]})})]})}),P&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-2xl relative animate-fadeIn",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4 rounded-t-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(h,{size:24}),"Ajouter un produit"]}),a.jsx("button",{onClick:()=>{D(!1),S({category_id:"",designation:"",reference:""})},className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:a.jsx(b,{size:22})})]})}),a.jsxs("div",{className:"p-6 space-y-5",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Catégorie ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:E.category_id||"",onChange:e=>S({...E,category_id:e.target.value}),disabled:G,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",children:[a.jsx("option",{value:"",children:"Sélectionnez une catégorie"}),k.map(e=>{const s=Array.isArray(e.prix_kg)?e.prix_kg.find(e=>"paris"===e.ligne)?.prix:e.prix_kg,r=Array.isArray(e.prix_kg)?e.prix_kg.find(e=>"autres"===e.ligne)?.prix:null,t=r?`${s}/${r}`:s;return a.jsxs("option",{value:e.id,children:[e.nom," (",t," Fcfa/kg)"]},e.id)})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Désignation ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Ex: Vêtement",value:E.designation||"",onChange:e=>S({...E,designation:e.target.value}),disabled:G,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Référence ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Ex: VETM",value:E.reference||"",onChange:e=>S({...E,reference:e.target.value.toUpperCase()}),disabled:G,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all uppercase"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"La référence sera automatiquement en majuscules"})]})]}),a.jsxs("div",{className:"bg-gray-50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>{D(!1),S({category_id:"",designation:"",reference:""})},className:"px-5 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 font-medium transition-colors",children:"Annuler"}),a.jsxs("button",{onClick:async()=>{if(!E.category_id||!E.designation||!E.reference)return H("error","Veuillez remplir tous les champs !");q(!0);try{(await N(l(E)).unwrap()).success?(H("success","Produit ajouté avec succès !"),S({category_id:"",designation:"",reference:""}),D(!1),N(r())):H("error","Erreur lors de l'ajout du produit !")}catch(e){H("error",e.message||"Erreur lors de l'ajout !")}finally{q(!1)}},disabled:G,className:"px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium flex items-center gap-2 transition-colors disabled:opacity-50",children:[G?a.jsx(i,{className:"animate-spin",size:18}):a.jsx(h,{size:18}),"Enregistrer"]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden sm:mr-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Liste des produits"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-0.5",children:[v?.length??0," produit",(v?.length??0)>1?"s":"","enregistré",(v?.length??0)>1?"s":""]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("input",{type:"text",placeholder:"Rechercher...",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm"})})]})}),a.jsx("div",{className:"hidden md:block overflow-x-auto",children:0===v.length?a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(p,{size:32,className:"text-gray-400"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Aucun produit trouvé"}),a.jsx("p",{className:"text-sm text-gray-500 text-center max-w-md",children:'Commencez par ajouter votre premier produit en cliquant sur le bouton "Ajouter un produit"'})]}):a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Référence"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Désignation"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Catégorie"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Statut"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Date de création"}),a.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:v.map(e=>{const s=k.find(s=>s.id===e.category_id);return a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx("span",{className:"text-blue-600 font-bold text-sm",children:e.reference?.substring(0,2)||"PR"})}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.reference})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.designation})}),a.jsx("td",{className:"px-6 py-4",children:s?a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:s.nom}):a.jsx("span",{className:"text-sm text-gray-400 italic",children:"Non définie"})}),a.jsx("td",{className:"px-6 py-4",children:e.actif?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-2"}),"Actif"]}):a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mr-2"}),"Inactif"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-600",children:new Date(e.created_at).toLocaleDateString()})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>C(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(j,{size:20})}),a.jsx("button",{onClick:()=>A(e),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(y,{size:20})})]})})]},e.id)})})]})}),a.jsx("div",{className:"md:hidden",children:0===v.length?a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[a.jsx(p,{size:32,className:"text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Aucun produit trouvé"})]}):a.jsx("div",{className:"flex flex-col divide-y divide-gray-100",children:v.map(e=>{const s=k.find(s=>s.id===e.category_id);return a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 font-bold text-xs",children:e.reference?.substring(0,2)||"PR"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-blue-600",children:e.reference}),a.jsx("h4",{className:"font-semibold text-gray-900",children:e.designation})]})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>C(e),className:"p-2 text-blue-600 bg-blue-50 rounded-lg",children:a.jsx(j,{size:16})}),a.jsx("button",{onClick:()=>A(e),className:"p-2 text-red-600 bg-red-50 rounded-lg",children:a.jsx(y,{size:16})})]})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[s?a.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-700 rounded text-[10px] font-medium border border-indigo-100",children:s.nom}):a.jsx("span",{className:"text-gray-400 italic text-[10px]",children:"Sans catégorie"}),e.actif?a.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-semibold text-green-600 bg-green-50 px-2 py-0.5 rounded-full",children:[a.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full"})," Actif"]}):a.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-semibold text-red-600 bg-red-50 px-2 py-0.5 rounded-full",children:[a.jsx("div",{className:"w-1 h-1 bg-red-500 rounded-full"})," Inactif"]})]}),a.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(e.created_at).toLocaleDateString()})]})]},e.id)})})}),_&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-2xl relative animate-fadeIn",children:[a.jsx("div",{className:"bg-gradient-to-r from-amber-600 to-orange-600 px-6 py-4 rounded-t-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(j,{size:24}),"Modifier le produit"]}),a.jsx("button",{onClick:()=>C(null),className:"text-white hover:bg-white/20 rounded-lg p-2 transition-colors",children:a.jsx(b,{size:22})})]})}),a.jsxs("div",{className:"p-6 space-y-5",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Catégorie ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:_?.category_id||"",onChange:e=>C({..._,category_id:e.target.value}),disabled:G,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition-all",children:[a.jsx("option",{value:"",children:"Sélectionnez une catégorie"}),k.map(e=>{const s=Array.isArray(e.prix_kg)?e.prix_kg.find(e=>"paris"===e.ligne)?.prix:e.prix_kg,r=Array.isArray(e.prix_kg)?e.prix_kg.find(e=>"autres"===e.ligne)?.prix:null,t=r?`${s}/${r}`:s;return a.jsxs("option",{value:e.id,children:[e.nom," (",t," Fcfa/kg)"]},e.id)})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Désignation ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Ex: Vêtement",value:_?.designation||"",onChange:e=>C({..._,designation:e.target.value}),disabled:G,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition-all"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Référence ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Ex: VETM",value:_?.reference||"",onChange:e=>C({..._,reference:e.target.value.toUpperCase()}),disabled:G,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition-all uppercase"})]})]}),a.jsxs("div",{className:"bg-gray-50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>C(null),className:"px-5 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 font-medium transition-colors",children:"Annuler"}),a.jsxs("button",{onClick:async()=>{if(!_.category_id||!_.designation||!_.reference)return H("error","Veuillez remplir tous les champs !");q(!0);try{(await N(d({produitId:_.id,produitData:{category_id:_.category_id,designation:_.designation,reference:_.reference}})).unwrap()).success?(H("success","Produit modifié avec succès !"),C(null),N(r())):H("error","Erreur lors de la modification !")}catch(e){H("error",e.message||"Erreur lors de la modification !")}finally{q(!1)}},disabled:G,className:"px-5 py-2.5 bg-amber-600 text-white rounded-lg hover:bg-amber-700 font-medium flex items-center gap-2 transition-colors disabled:opacity-50",children:[G?a.jsx(i,{className:"animate-spin",size:18}):a.jsx(f,{size:18}),"Enregistrer les modifications"]})]})]})}),z&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white w-full max-w-md rounded-xl shadow-2xl relative animate-fadeIn",children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mx-auto mb-4",children:a.jsx(p,{size:32,className:"text-red-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 text-center mb-2",children:"Confirmer la suppression"}),a.jsxs("p",{className:"text-gray-600 text-center mb-6",children:["Êtes-vous sûr de vouloir supprimer le produit ",a.jsx("br",{}),a.jsxs("span",{className:"font-semibold text-gray-900",children:['"',z.designation,'"']})," ?",a.jsx("br",{}),a.jsx("span",{className:"text-sm text-red-600",children:"Cette action est irréversible."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>A(null),className:"flex-1 px-5 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 font-medium transition-colors",children:"Annuler"}),a.jsxs("button",{onClick:async()=>{if(z){q(!0);try{(await N(n(z.id)).unwrap()).success?(H("success","Produit supprimé avec succès !"),A(null),N(r())):H("error","Erreur lors de la suppression !")}catch(e){H("error",e.message||"Erreur lors de la suppression !")}finally{q(!1)}}},className:"flex-1 px-5 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium flex items-center justify-center gap-2 transition-colors",children:[a.jsx(y,{size:18}),"Supprimer"]})]})]})})}),v.length>0&&a.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Affichage de ",a.jsx("span",{className:"font-medium",children:"1"})," à ",a.jsx("span",{className:"font-medium",children:v.length})," sur ",a.jsx("span",{className:"font-medium",children:v.length})," résultats"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!0,children:"Précédent"}),a.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:"1"}),a.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!0,children:"Suivant"})]})]})})]})]})}export{N as default};
